<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Toys::DSL::Tool
  
    &mdash; Toys
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Toys::DSL::Tool";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Toys.html" title="Toys (module)">Toys</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span>
     &raquo; 
    <span class="title">Tool</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Toys::DSL::Tool
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/toys/dsl/tool.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This class defines the DSL for a Toys configuration file.</p>

<p>A Toys configuration defines one or more named tools. It provides syntax
for setting the description, defining flags and arguments, specifying
how to execute the tool, and requesting mixin modules and other services.
It also lets you define subtools, nested arbitrarily deep, using blocks.</p>

<h3 id="simple-example">Simple example</h3>

<p>Create a file called <code>.toys.rb</code> in the current directory, with the
following contents:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>greet</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_desc'>desc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prints a simple greeting</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_optional_arg'>optional_arg</span> <span class='symbol'>:recipient</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>world</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_recipient'>recipient</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>Now you can execute it using:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_toys'>toys</span> <span class='id identifier rubyid_greet'>greet</span>
</code></pre>

<p>or try:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_toys'>toys</span> <span class='id identifier rubyid_greet'>greet</span> <span class='id identifier rubyid_rubyists'>rubyists</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acceptor-instance_method" title="#acceptor (instance method)">#<strong>acceptor</strong>(name, spec = nil, type_desc: nil, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a named acceptor that can be referenced by name from any flag or positional argument in this tool or its subtools.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#alias_tool-instance_method" title="#alias_tool (instance method)">#<strong>alias_tool</strong>(word, target)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Use <span class='object_link'><a href="#tool-instance_method" title="Toys::DSL::Tool#tool (method)">#tool</a></span> and pass <code>:delegate_relative</code> instead</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_required-instance_method" title="#all_required (instance method)">#<strong>all_required</strong>(desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a flag group of type <code>:required</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#at_least_one-instance_method" title="#at_least_one (instance method)">#<strong>at_least_one</strong>(desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; self </a>
    

    
      (also: #at_least_one_required)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a flag group of type <code>:at_least_one</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#at_most_one-instance_method" title="#at_most_one (instance method)">#<strong>at_most_one</strong>(desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; self </a>
    

    
      (also: #at_most_one_required)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a flag group of type <code>:at_most_one</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#complete_tool_args-instance_method" title="#complete_tool_args (instance method)">#<strong>complete_tool_args</strong>(spec = nil, **options, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the shell completion strategy for this tool&#39;s arguments.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#completion-instance_method" title="#completion (instance method)">#<strong>completion</strong>(name, spec = nil, **options, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a named completion procedure that may be used by name by any flag or positional arg in this tool or any subtool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#context_directory-instance_method" title="#context_directory (instance method)">#<strong>context_directory</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return the context directory for this tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_tool-instance_method" title="#current_tool (instance method)">#<strong>current_tool</strong>  &#x21d2; Toys::ToolDefinition </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return the current tool config.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delegate_to-instance_method" title="#delegate_to (instance method)">#<strong>delegate_to</strong>(target)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Causes the current tool to delegate to another tool, specified by the full tool name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#desc-instance_method" title="#desc (instance method)">#<strong>desc</strong>(str)  &#x21d2; self </a>
    

    
      (also: #short_desc)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the short description for the current tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable_argument_parsing-instance_method" title="#disable_argument_parsing (instance method)">#<strong>disable_argument_parsing</strong>  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Disable argument parsing for this tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable_flag-instance_method" title="#disable_flag (instance method)">#<strong>disable_flag</strong>(*flags)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Mark one or more flags as disabled, preventing their use by any subsequent flag definition.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enforce_flags_before_args-instance_method" title="#enforce_flags_before_args (instance method)">#<strong>enforce_flags_before_args</strong>(state = true)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Enforce that all flags must be provided before any positional args.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exactly_one-instance_method" title="#exactly_one (instance method)">#<strong>exactly_one</strong>(desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; self </a>
    

    
      (also: #exactly_one_required)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a flag group of type <code>:exactly_one</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#expand-instance_method" title="#expand (instance method)">#<strong>expand</strong>(template_class, *args, **kwargs) {|template| ... } &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Expand the given template in the current location.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_data-instance_method" title="#find_data (instance method)">#<strong>find_data</strong>(path, type: nil)  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find the given data path (file or directory).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flag-instance_method" title="#flag (instance method)">#<strong>flag</strong>(key, *flags, accept: nil, default: nil, handler: nil, complete_flags: nil, complete_values: nil, report_collisions: true, group: nil, desc: nil, long_desc: nil, display_name: nil, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add a flag to the current tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flag_group-instance_method" title="#flag_group (instance method)">#<strong>flag_group</strong>(type: :optional, desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a flag group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#include-instance_method" title="#include (instance method)">#<strong>include</strong>(mixin, *args, **kwargs)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specify that the given module should be mixed into this tool, and its methods made available when running the tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#include%3F-instance_method" title="#include? (instance method)">#<strong>include?</strong>(mod)  &#x21d2; Boolean<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Determine if the given module/mixin has already been included.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load-instance_method" title="#load (instance method)">#<strong>load</strong>(path, as: nil)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Load another config file or directory, as if its contents were inserted at the current location.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_git-instance_method" title="#load_git (instance method)">#<strong>load_git</strong>(remote: nil, path: nil, commit: nil, as: nil, update: false)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Load configuration from a public git repository, as if its contents were inserted at the current location.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#long_desc-instance_method" title="#long_desc (instance method)">#<strong>long_desc</strong>(*strs, file: nil, data: nil)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add to the long description for the current tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mixin-instance_method" title="#mixin (instance method)">#<strong>mixin</strong>(name, mixin_module = nil, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a named mixin module that can be included by name from this tool or its subtools.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_interrupt-instance_method" title="#on_interrupt (instance method)">#<strong>on_interrupt</strong>(handler = nil, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specify how to handle interrupts.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_usage_error-instance_method" title="#on_usage_error (instance method)">#<strong>on_usage_error</strong>(handler = nil, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specify how to handle usage errors.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#optional_arg-instance_method" title="#optional_arg (instance method)">#<strong>optional_arg</strong>(key, default: nil, accept: nil, complete: nil, display_name: nil, desc: nil, long_desc: nil, &amp;block)  &#x21d2; self </a>
    

    
      (also: #optional)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add an optional positional argument to the current tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remaining_args-instance_method" title="#remaining_args (instance method)">#<strong>remaining_args</strong>(key, default: [], accept: nil, complete: nil, display_name: nil, desc: nil, long_desc: nil, &amp;block)  &#x21d2; self </a>
    

    
      (also: #remaining)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specify what should be done with unmatched positional arguments.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_exact_flag_match-instance_method" title="#require_exact_flag_match (instance method)">#<strong>require_exact_flag_match</strong>(state = true)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Require that flags must match exactly.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#required_arg-instance_method" title="#required_arg (instance method)">#<strong>required_arg</strong>(key, accept: nil, complete: nil, display_name: nil, desc: nil, long_desc: nil, &amp;block)  &#x21d2; self </a>
    

    
      (also: #required)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add a required positional argument to the current tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set-instance_method" title="#set (instance method)">#<strong>set</strong>(key, value = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set a option values statically without creating helper methods.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_context_directory-instance_method" title="#set_context_directory (instance method)">#<strong>set_context_directory</strong>(dir)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set a custom context directory for this tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#settings-instance_method" title="#settings (instance method)">#<strong>settings</strong>  &#x21d2; Toys::ToolDefinition::Settings </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the settings for this tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#source_info-instance_method" title="#source_info (instance method)">#<strong>source_info</strong>  &#x21d2; Toys::SourceInfo </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return the current source info object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#static-instance_method" title="#static (instance method)">#<strong>static</strong>(key, value = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set a option values statically and create a helper method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#subtool_apply-instance_method" title="#subtool_apply (instance method)">#<strong>subtool_apply</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Applies the given block to all subtools, recursively.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#template-instance_method" title="#template (instance method)">#<strong>template</strong>(name, template_class = nil, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a named template that can be expanded by name from this tool or its subtools.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_run-instance_method" title="#to_run (instance method)">#<strong>to_run</strong>(&amp;block)  &#x21d2; self </a>
    

    
      (also: #on_run)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specify how to run this tool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tool-instance_method" title="#tool (instance method)">#<strong>tool</strong>(words, if_defined: :combine, delegate_to: nil, delegate_relative: nil, &amp;block)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a subtool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#toys_version!-instance_method" title="#toys_version! (instance method)">#<strong>toys_version!</strong>(*requirements)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Asserts that the current Toys version against the given requirements, raising an exception if not.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#toys_version%3F-instance_method" title="#toys_version? (instance method)">#<strong>toys_version?</strong>(*requirements)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Determines whether the current Toys version satisfies the given requirements.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#truncate_load_path!-instance_method" title="#truncate_load_path! (instance method)">#<strong>truncate_load_path!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Remove lower-priority sources from the load path.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="acceptor-instance_method">
  
    #<strong>acceptor</strong>(name, spec = nil, type_desc: nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a named acceptor that can be referenced by name from any flag or
positional argument in this tool or its subtools.</p>

<p>An acceptor validates the string parameter passed to a flag or
positional argument. It also optionally converts the string to a
different object before storing it in your tool&#39;s data.</p>

<p>Acceptors can be defined in one of four ways.</p>

<ul>
<li><p>You can provide a <strong>regular expression</strong>. This acceptor validates
only if the regex matches the <em>entire string parameter</em>.</p>

<p>You can also provide an optional conversion function as a block. If
provided, function must take a variable number of arguments, the
first being the matched string and the remainder being the captures
from the regular expression. It should return the converted object
that will be stored in the context data. If you do not provide a
block, the original string will be used.</p></li>
<li><p>You can provide an <strong>array</strong> of possible values. The acceptor
validates if the string parameter matches the <em>string form</em> of one
of the array elements (i.e. the results of calling <code>to_s</code> on the
array elements.)</p>

<p>An array acceptor automatically converts the string parameter to
the actual array element that it matched. For example, if the
symbol <code>:foo</code> is in the array, it will match the string <code>&quot;foo&quot;</code>,
and then store the symbol <code>:foo</code> in the tool data.</p></li>
<li><p>You can provide a <strong>range</strong> of possible values, along with a
conversion function that converts a string parameter to a type
comparable by the range. (See the &quot;function&quot; spec below for a
detailed description of conversion functions.) If the range has
numeric endpoints, the conversion function is optional because a
default will be provided.</p></li>
<li><p>You can provide a <strong>function</strong> by passing it as a proc or a block.
This function performs <em>both</em> validation and conversion. It should
take the string parameter as its argument, and it must either
return the object that should be stored in the tool data, or raise
an exception (descended from <code>StandardError</code>) to indicate that the
string parameter is invalid.</p></li>
</ul>

<h3 id="example">Example</h3>

<p>The following example creates an acceptor named &quot;hex&quot; that is defined
via a regular expression. It then uses it to validate values passed to
a flag.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_acceptor'>acceptor</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hex</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[0-9a-fA-F]+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='label'>type_desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hex numbers</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:number</span><span class='comma'>,</span> <span class='label'>accept:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hex</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>number was </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_number'>number</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The acceptor name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>spec</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See the description for recognized values.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type_desc</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Type description string, shown in help.
Defaults to the acceptor name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>See the description for recognized forms.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_acceptor'>acceptor</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>type_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='op'>&amp;.</span><span class='id identifier rubyid_add_acceptor'>add_acceptor</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='label'>type_desc:</span> <span class='id identifier rubyid_type_desc'>type_desc</span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="alias_tool-instance_method">
  
    #<strong>alias_tool</strong>(word, target)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Use <span class='object_link'><a href="#tool-instance_method" title="Toys::DSL::Tool#tool (method)">#tool</a></span> and pass <code>:delegate_relative</code> instead</p>
</div></div>
<p>Create an alias, representing an &quot;alternate name&quot; for a tool.</p>

<p>Note: This is functionally equivalent to creating a tool with the
<code>:delegate_relative</code> option. As such, <code>alias_tool</code> is considered
deprecated.</p>

<h3 id="example">Example</h3>

<p>This example defines a tool and an alias pointing to it. Both the tool
name <code>test</code> and the alias <code>t</code> will then refer to the same tool.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Running tests...</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_alias_tool'>alias_tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'># Note: the following is preferred over alias_tool:
</span><span class='comment'># tool &quot;t&quot;, delegate_relative: &quot;test&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>word</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the alias</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>target</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Relative path to the target of the
alias. This path may be given as an array of strings, or a single
string possibly delimited by path separators.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


358
359
360
361</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 358</span>

<span class='kw'>def</span> <span class='id identifier rubyid_alias_tool'>alias_tool</span><span class='lparen'>(</span><span class='id identifier rubyid_word'>word</span><span class='comma'>,</span> <span class='id identifier rubyid_target'>target</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tool'>tool</span><span class='lparen'>(</span><span class='id identifier rubyid_word'>word</span><span class='comma'>,</span> <span class='label'>delegate_relative:</span> <span class='id identifier rubyid_target'>target</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_required-instance_method">
  
    #<strong>all_required</strong>(desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a flag group of type <code>:required</code>. If a block is given, flags
defined in the block belong to the group. All flags in this group are
required.</p>

<h3 id="example">Example</h3>

<p>The following example creates a group of required flags.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>login</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_all_required'>all_required</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:username</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--username=VAL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Set username (required)</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:password</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--password=VAL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Set password (required)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='comment'># ...
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the group. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of allowed formats. Defaults to <code>&quot;Flags&quot;</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag group. See
<span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for a description of allowed formats.
Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The name of the group, or nil for no
name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>report_collisions</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raise an exception if a
the given name is already taken. If <code>false</code>, ignore. Default is
<code>true</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prepend</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, prepend rather than append the
group to the list. Default is <code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Adds flags to the group. See <span class='object_link'><a href="FlagGroup.html" title="Toys::DSL::FlagGroup (class)">FlagGroup</a></span>
for the directives that can be called in this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


675
676
677
678
679</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 675</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_required'>all_required</span><span class='lparen'>(</span><span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>report_collisions:</span> <span class='kw'>true</span><span class='comma'>,</span>
                 <span class='label'>prepend:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_flag_group'>flag_group</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='symbol'>:required</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='comma'>,</span>
             <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>report_collisions:</span> <span class='id identifier rubyid_report_collisions'>report_collisions</span><span class='comma'>,</span> <span class='label'>prepend:</span> <span class='id identifier rubyid_prepend'>prepend</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="at_least_one-instance_method">
  
    #<strong>at_least_one</strong>(desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; <tt>self</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='at_least_one_required-instance_method'>at_least_one_required</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a flag group of type <code>:at_least_one</code>. If a block is given, flags
defined in the block belong to the group. At least one flag in this
group must be provided on the command line.</p>

<h3 id="example">Example</h3>

<p>The following example creates a group of flags in which one or more
may be set.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>run-tests</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_at_least_one'>at_least_one</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:unit</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Run unit tests</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:integration</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Run integration tests</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:performance</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Run performance tests</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='comment'># ...
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the group. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of allowed formats. Defaults to <code>&quot;Flags&quot;</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag group. See
<span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for a description of allowed formats.
Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The name of the group, or nil for no
name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>report_collisions</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raise an exception if a
the given name is already taken. If <code>false</code>, ignore. Default is
<code>true</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prepend</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, prepend rather than append the
group to the list. Default is <code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Adds flags to the group. See <span class='object_link'><a href="FlagGroup.html" title="Toys::DSL::FlagGroup (class)">FlagGroup</a></span>
for the directives that can be called in this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


762
763
764
765
766</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 762</span>

<span class='kw'>def</span> <span class='id identifier rubyid_at_least_one'>at_least_one</span><span class='lparen'>(</span><span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>report_collisions:</span> <span class='kw'>true</span><span class='comma'>,</span>
                 <span class='label'>prepend:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_flag_group'>flag_group</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='symbol'>:at_least_one</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='comma'>,</span>
             <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>report_collisions:</span> <span class='id identifier rubyid_report_collisions'>report_collisions</span><span class='comma'>,</span> <span class='label'>prepend:</span> <span class='id identifier rubyid_prepend'>prepend</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="at_most_one-instance_method">
  
    #<strong>at_most_one</strong>(desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; <tt>self</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='at_most_one_required-instance_method'>at_most_one_required</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a flag group of type <code>:at_most_one</code>. If a block is given, flags
defined in the block belong to the group. At most one flag in this
group must be provided on the command line.</p>

<h3 id="example">Example</h3>

<p>The following example creates a group of flags in which either one or
none may be set, but not more than one.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>provision-server</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_at_most_one'>at_most_one</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:restore_from_backup</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--restore-from-backup=VAL</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:restore_from_image</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--restore-from-image=VAL</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:clone_existing</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--clone-existing=VAL</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='comment'># ...
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the group. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of allowed formats. Defaults to <code>&quot;Flags&quot;</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag group. See
<span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for a description of allowed formats.
Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The name of the group, or nil for no
name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>report_collisions</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raise an exception if a
the given name is already taken. If <code>false</code>, ignore. Default is
<code>true</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prepend</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, prepend rather than append the
group to the list. Default is <code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Adds flags to the group. See <span class='object_link'><a href="FlagGroup.html" title="Toys::DSL::FlagGroup (class)">FlagGroup</a></span>
for the directives that can be called in this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


718
719
720
721
722</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 718</span>

<span class='kw'>def</span> <span class='id identifier rubyid_at_most_one'>at_most_one</span><span class='lparen'>(</span><span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>report_collisions:</span> <span class='kw'>true</span><span class='comma'>,</span>
                <span class='label'>prepend:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_flag_group'>flag_group</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='symbol'>:at_most_one</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='comma'>,</span>
             <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>report_collisions:</span> <span class='id identifier rubyid_report_collisions'>report_collisions</span><span class='comma'>,</span> <span class='label'>prepend:</span> <span class='id identifier rubyid_prepend'>prepend</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="complete_tool_args-instance_method">
  
    #<strong>complete_tool_args</strong>(spec = nil, **options, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set the shell completion strategy for this tool&#39;s arguments.
You can pass one of the following:</p>

<ul>
<li> The string name of a completion defined in this tool or any of its
its ancestors.</li>
<li> A hash of options to pass to the constructor of
<span class='object_link'><a href="../ToolDefinition/DefaultCompletion.html" title="Toys::ToolDefinition::DefaultCompletion (class)">ToolDefinition::DefaultCompletion</a></span>.</li>
<li> <code>nil</code> or <code>:default</code> to select the standard completion strategy
(which is <span class='object_link'><a href="../ToolDefinition/DefaultCompletion.html" title="Toys::ToolDefinition::DefaultCompletion (class)">ToolDefinition::DefaultCompletion</a></span> with no extra
options).</li>
<li> Any other specification recognized by <span class='object_link'><a href="../Completion.html#create-class_method" title="Toys::Completion.create (method)">Completion.create</a></span>.</li>
</ul>

<h3 id="example">Example</h3>

<p>The namespace &quot;foo&quot; supports completion only of subtool names. It does
not complete the standard flags (like --help).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_complete_tool_args'>complete_tool_args</span> <span class='label'>complete_args:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>complete_flags:</span> <span class='kw'>false</span><span class='comma'>,</span>
                     <span class='label'>complete_flag_values:</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>in foo bar</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>spec</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1394
1395
1396
1397
1398
1399</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1394</span>

<span class='kw'>def</span> <span class='id identifier rubyid_complete_tool_args'>complete_tool_args</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_completion'>completion</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Completion.html" title="Toys::Completion (module)">Completion</a></span></span><span class='period'>.</span><span class='id identifier rubyid_scalarize_spec'>scalarize_spec</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="completion-instance_method">
  
    #<strong>completion</strong>(name, spec = nil, **options, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a named completion procedure that may be used by name by any
flag or positional arg in this tool or any subtool.</p>

<p>A completion controls tab completion for the value of a flag or
positional argument. In general, it is a Ruby <code>Proc</code> that takes a
context object (of type <span class='object_link'><a href="../Completion/Context.html" title="Toys::Completion::Context (class)">Completion::Context</a></span>) and returns an
array of completion candidate strings.</p>

<p>Completions can be specified in one of three ways.</p>

<ul>
<li> A Proc object itself, either passed directly to this directive or
provided as a block.</li>
<li> A static array of strings, indicating the completion candidates
independent of context.</li>
<li> The symbol <code>:file_system</code> which indicates that paths in the file
system should serve as completion candidates.</li>
</ul>

<h3 id="example">Example</h3>

<p>The following example defines a completion that uses only the immediate
files in the current directory as candidates. (This is different from
the <code>:file_system</code> completion which will descend into subdirectories
similar to how bash completes most of its file system commands.)</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_completion'>completion</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>local-files</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__context'>_context</span><span class='op'>|</span>
  <span class='backtick'>`</span><span class='tstring_content'>/bin/ls</span><span class='tstring_end'>`</span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:file</span><span class='comma'>,</span> <span class='label'>complete_values:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>local-files</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>selected file </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Name of the completion</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>spec</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See the description for recognized values.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional options to pass to the completion.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>See the description for recognized forms.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_completion'>completion</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_add_completion'>add_completion</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="context_directory-instance_method">
  
    #<strong>context_directory</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return the context directory for this tool. Generally, this defaults
to the directory containing the toys config directory structure being
read, but it may be changed by setting a different context directory
for the tool.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Context directory path</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if there is no context.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1596
1597
1598</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1596</span>

<span class='kw'>def</span> <span class='id identifier rubyid_context_directory'>context_directory</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_context_directory'>context_directory</span> <span class='op'>||</span> <span class='id identifier rubyid_source_info'>source_info</span><span class='period'>.</span><span class='id identifier rubyid_context_directory'>context_directory</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_tool-instance_method">
  
    #<strong>current_tool</strong>  &#x21d2; <tt><span class='object_link'><a href="../ToolDefinition.html" title="Toys::ToolDefinition (class)">Toys::ToolDefinition</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return the current tool config. This object can be queried to determine
such information as the name, but it should not be altered.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../ToolDefinition.html" title="Toys::ToolDefinition (class)">Toys::ToolDefinition</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1606
1607
1608</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1606</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_tool'>current_tool</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delegate_to-instance_method">
  
    #<strong>delegate_to</strong>(target)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Causes the current tool to delegate to another tool, specified by the
full tool name. When run, it simply invokes the target tool with the
same arguments.</p>

<h3 id="example">Example</h3>

<p>This example defines a tool that runs one of its subtools. Running the
<code>test</code> tool will have the same effect (and recognize the same args) as
the subtool <code>test unit</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unit</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:faster</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>running tests...</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_delegate_to'>delegate_to</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test:unit</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>target</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The full path to the delegate
tool. This path may be given as an array of strings, or a single
string possibly delimited by path separators.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


389
390
391
392
393
394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 389</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delegate_to'>delegate_to</span><span class='lparen'>(</span><span class='id identifier rubyid_target'>target</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_delegate_to'>delegate_to</span><span class='lparen'>(</span><span class='ivar'>@__loader</span><span class='period'>.</span><span class='id identifier rubyid_split_path'>split_path</span><span class='lparen'>(</span><span class='id identifier rubyid_target'>target</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="desc-instance_method">
  
    #<strong>desc</strong>(str)  &#x21d2; <tt>self</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='short_desc-instance_method'>short_desc</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set the short description for the current tool. The short description
is displayed with the tool in a subtool list. You may also use the
equivalent method <code>short_desc</code>.</p>

<p>The description is a <span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">WrappableString</a></span>, which may be word-wrapped
when displayed in a help screen. You may pass a <span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">WrappableString</a></span>
directly to this method, or you may pass any input that can be used to
construct a wrappable string:</p>

<ul>
<li> If you pass a String, its whitespace will be compacted (i.e. tabs,
newlines, and multiple consecutive whitespace will be turned into a
single space), and it will be word-wrapped on whitespace.</li>
<li> If you pass an Array of Strings, each string will be considered a
literal word that cannot be broken, and wrapping will be done
across the strings in the array. In this case, whitespace is not
compacted.</li>
</ul>

<h3 id="examples">Examples</h3>

<p>If you pass in a sentence as a simple string, it may be word wrapped
when displayed:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_desc'>desc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This sentence may be wrapped.</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>To specify a sentence that should never be word-wrapped, pass it as the
sole element of a string array:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_desc'>desc</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This sentence will not be wrapped.</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>str</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>, <tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


536
537
538
539
540
541</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 536</span>

<span class='kw'>def</span> <span class='id identifier rubyid_desc'>desc</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span> <span class='op'>=</span> <span class='id identifier rubyid_str'>str</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disable_argument_parsing-instance_method">
  
    #<strong>disable_argument_parsing</strong>  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Disable argument parsing for this tool. Arguments will not be parsed
and the options will not be populated. Instead, tools can retrieve the
full unparsed argument list by calling <span class='object_link'><a href="../Context.html#args-instance_method" title="Toys::Context#args (method)">Context#args</a></span>.</p>

<p>This directive is mutually exclusive with any of the directives that
declare arguments or flags.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1330
1331
1332
1333</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disable_argument_parsing'>disable_argument_parsing</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_disable_argument_parsing'>disable_argument_parsing</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disable_flag-instance_method">
  
    #<strong>disable_flag</strong>(*flags)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Mark one or more flags as disabled, preventing their use by any
subsequent flag definition. This can be used to prevent middleware from
defining a particular flag.</p>

<h3 id="example">Example</h3>

<p>This tool does not support the <code>-v</code> and <code>-q</code> short forms for the two
verbosity flags (although it still supports the long forms <code>--verbose</code>
and <code>--quiet</code>.)</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mytool</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_disable_flag'>disable_flag</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-v</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-q</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='comment'># ...
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>flags</span>
      
      
        <span class='type'>(<tt>String...</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The flags to disable</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1356
1357
1358
1359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1356</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disable_flag'>disable_flag</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_flags'>flags</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_disable_flag'>disable_flag</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_flags'>flags</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enforce_flags_before_args-instance_method">
  
    #<strong>enforce_flags_before_args</strong>(state = true)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Enforce that all flags must be provided before any positional args.
That is, as soon as the first positional arg appears in the command
line arguments, flag parsing is disabled as if <code>--</code> had appeared.</p>

<p>Issuing this directive by itself turns on enforcement. You may turn it
off by passsing <code>false</code> as the parameter.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1299
1300
1301
1302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enforce_flags_before_args'>enforce_flags_before_args</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_enforce_flags_before_args'>enforce_flags_before_args</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exactly_one-instance_method">
  
    #<strong>exactly_one</strong>(desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; <tt>self</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='exactly_one_required-instance_method'>exactly_one_required</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a flag group of type <code>:exactly_one</code>. If a block is given, flags
defined in the block belong to the group. Exactly one flag in this
group must be provided on the command line.</p>

<h3 id="example">Example</h3>

<p>The following example creates a group of flags in which exactly one
must be set.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deploy</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_exactly_one'>exactly_one</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:server</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--server=IP_ADDR</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Deploy to server</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:vm</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--vm=ID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Deploy to a VM</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:container</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--container=ID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Deploy to a container</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='comment'># ...
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the group. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of allowed formats. Defaults to <code>&quot;Flags&quot;</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag group. See
<span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for a description of allowed formats.
Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The name of the group, or nil for no
name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>report_collisions</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raise an exception if a
the given name is already taken. If <code>false</code>, ignore. Default is
<code>true</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prepend</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, prepend rather than append the
group to the list. Default is <code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Adds flags to the group. See <span class='object_link'><a href="FlagGroup.html" title="Toys::DSL::FlagGroup (class)">FlagGroup</a></span>
for the directives that can be called in this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


806
807
808
809
810</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 806</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exactly_one'>exactly_one</span><span class='lparen'>(</span><span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>report_collisions:</span> <span class='kw'>true</span><span class='comma'>,</span>
                <span class='label'>prepend:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_flag_group'>flag_group</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='symbol'>:exactly_one</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='comma'>,</span>
             <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>report_collisions:</span> <span class='id identifier rubyid_report_collisions'>report_collisions</span><span class='comma'>,</span> <span class='label'>prepend:</span> <span class='id identifier rubyid_prepend'>prepend</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="expand-instance_method">
  
    #<strong>expand</strong>(template_class, *args, **kwargs) {|template| ... } &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Expand the given template in the current location.</p>

<p>The template may be specified as a class or a well-known template name.
You may also provide arguments to pass to the template.</p>

<h3 id="example">Example</h3>

<p>The following example creates and uses a simple template.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello-generator</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
    <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='ivar'>@message</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:message</span>
  <span class='id identifier rubyid_expansion'>expansion</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_template'>template</span><span class='op'>|</span>
    <span class='id identifier rubyid_tool'>tool</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_to_run'>to_run</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_expand'>expand</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello-generator</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mytool</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mytool is running!</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>template_class</span>
      
      
        <span class='type'>(<tt>Class</tt>, <tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The template, either as a
class or a well-known name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Object...</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Template arguments</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#template-instance_method" title="Toys::DSL::Tool#template (method)">template</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 484</span>

<span class='kw'>def</span> <span class='id identifier rubyid_expand'>expand</span><span class='lparen'>(</span><span class='id identifier rubyid_template_class'>template_class</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_template_class'>template_class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_template_class'>template_class</span>
  <span class='kw'>when</span> <span class='op'>::</span><span class='const'>String</span>
    <span class='id identifier rubyid_template_class'>template_class</span> <span class='op'>=</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_lookup_template'>lookup_template</span><span class='lparen'>(</span><span class='id identifier rubyid_template_class'>template_class</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='op'>::</span><span class='const'>Symbol</span>
    <span class='id identifier rubyid_template_class'>template_class</span> <span class='op'>=</span> <span class='ivar'>@__loader</span><span class='period'>.</span><span class='id identifier rubyid_resolve_standard_template'>resolve_standard_template</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_template_class'>template_class</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../ToolDefinitionError.html" title="Toys::ToolDefinitionError (class)">ToolDefinitionError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Template not found: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'>Compat</span><span class='period'>.</span><span class='id identifier rubyid_instantiate'>instantiate</span><span class='lparen'>(</span><span class='id identifier rubyid_template_class'>template_class</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_kwargs'>kwargs</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>yield</span> <span class='id identifier rubyid_template'>template</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_class_exec'>class_exec</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_template_class'>template_class</span><span class='period'>.</span><span class='id identifier rubyid_expansion'>expansion</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_data-instance_method">
  
    #<strong>find_data</strong>(path, type: nil)  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find the given data path (file or directory).</p>

<p>Data directories are a convenient place to put images, archives, keys,
or other such static data needed by your tools. Data files are located
in a directory called <code>.data</code> inside a Toys directory. This directive
locates a data file during tool definition.</p>

<h3 id="example">Example</h3>

<p>This tool reads its description from a text file in the <code>.data</code>
directory.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mytool</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_find_data'>find_data</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mytool-desc.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='symbol'>:file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_desc'>desc</span> <span class='const'>IO</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='comment'># ...
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The path to find</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>nil</tt>, <tt>:file</tt>, <tt>:directory</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Type of file system object to find.
Default is <code>nil</code>, indicating any type.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Absolute path of the data.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the given data path is not found.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1583
1584
1585</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1583</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_data'>find_data</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_source_info'>source_info</span><span class='period'>.</span><span class='id identifier rubyid_find_data'>find_data</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flag-instance_method">
  
    #<strong>flag</strong>(key, *flags, accept: nil, default: nil, handler: nil, complete_flags: nil, complete_values: nil, report_collisions: true, group: nil, desc: nil, long_desc: nil, display_name: nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add a flag to the current tool. Each flag must specify a key which
the script may use to obtain the flag value from the context.
You may then provide the flags themselves in OptionParser form.</p>

<p>If the given key is a symbol representing a valid method name, then a
helper method is automatically added to retrieve the value. Otherwise,
if the key is a string or does not represent a valid method name, the
tool can retrieve the value by calling <span class='object_link'><a href="../Context.html#get-instance_method" title="Toys::Context#get (method)">Context#get</a></span>.</p>

<p>Attributes of the flag may be passed in as arguments to this method, or
set in a block passed to this method. If you provide a block, you can
use directives in <span class='object_link'><a href="Flag.html" title="Toys::DSL::Flag (class)">Flag</a></span> within the block.</p>

<h3 id="flag-syntax">Flag syntax</h3>

<p>The flags themselves should be provided in OptionParser form. Following
are examples of valid syntax.</p>

<ul>
<li> <code>-a</code> : A short boolean switch. When this appears as an argument,
the value is set to <code>true</code>.</li>
<li> <code>--abc</code> : A long boolean switch. When this appears as an argument,
the value is set to <code>true</code>.</li>
<li> <code>-aVAL</code> or <code>-a VAL</code> : A short flag that takes a required value.
These two forms are treated identically. If this argument appears
with a value attached (e.g. <code>-afoo</code>), the attached string (e.g.
<code>&quot;foo&quot;</code>) is taken as the value. Otherwise, the following argument
is taken as the value (e.g. for <code>-a foo</code>, the value is set to
<code>&quot;foo&quot;</code>.) The following argument is treated as the value even if it
looks like a flag (e.g. <code>-a -a</code> causes the string <code>&quot;-a&quot;</code> to be
taken as the value.)</li>
<li> <code>-a[VAL]</code> : A short flag that takes an optional value. If this
argument appears with a value attached (e.g. <code>-afoo</code>), the attached
string (e.g. <code>&quot;foo&quot;</code>) is taken as the value. Otherwise, the value
is set to <code>true</code>. The following argument is never interpreted as
the value. (Compare with <code>-a [VAL]</code>.)</li>
<li> <code>-a [VAL]</code> : A short flag that takes an optional value. If this
argument appears with a value attached (e.g. <code>-afoo</code>), the attached
string (e.g. <code>&quot;foo&quot;</code>) is taken as the value. Otherwise, if the
following argument does not look like a flag (i.e. it does not
begin with a hyphen), it is taken as the value. (e.g. <code>-a foo</code>
causes the string <code>&quot;foo&quot;</code> to be taken as the value.). If there is
no following argument, or the following argument looks like a flag,
the value is set to <code>true</code>. (Compare with <code>-a[VAL]</code>.)</li>
<li> <code>--abc=VAL</code> or <code>--abc VAL</code> : A long flag that takes a required
value. These two forms are treated identically. If this argument
appears with a value attached (e.g. <code>--abc=foo</code>), the attached
string (e.g. <code>&quot;foo&quot;</code>) is taken as the value. Otherwise, the
following argument is taken as the value (e.g. for <code>--abc foo</code>, the
value is set to <code>&quot;foo&quot;</code>.) The following argument is treated as the
value even if it looks like a flag (e.g. <code>--abc --def</code> causes the
string <code>&quot;--def&quot;</code> to be taken as the value.)</li>
<li> <code>--abc[=VAL]</code> : A long flag that takes an optional value. If this
argument appears with a value attached (e.g. <code>--abc=foo</code>), the
attached string (e.g. <code>&quot;foo&quot;</code>) is taken as the value. Otherwise,
the value is set to <code>true</code>. The following argument is never
interpreted as the value. (Compare with <code>--abc [VAL]</code>.)</li>
<li> <code>--abc [VAL]</code> : A long flag that takes an optional value. If this
argument appears with a value attached (e.g. <code>--abc=foo</code>), the
attached string (e.g. <code>&quot;foo&quot;</code>) is taken as the value. Otherwise, if
the following argument does not look like a flag (i.e. it does not
begin with a hyphen), it is taken as the value. (e.g. <code>--abc foo</code>
causes the string <code>&quot;foo&quot;</code> to be taken as the value.). If there is
no following argument, or the following argument looks like a flag,
the value is set to <code>true</code>. (Compare with <code>--abc=[VAL]</code>.)</li>
<li> <code>--[no-]abc</code> : A long boolean switch that can be turned either on
or off. This effectively creates two flags, <code>--abc</code> which sets the
value to <code>true</code>, and <code>--no-abc</code> which sets the falue to <code>false</code>.</li>
</ul>

<h3 id="default-flag-syntax">Default flag syntax</h3>

<p>If no flag syntax strings are provided, a default syntax will be
inferred based on the key and other options.</p>

<p>Specifically, if the key has one character, then that character will be
chosen as a short flag. If the key has multiple characters, a long flag
will be generated.</p>

<p>Furthermore, if a custom completion, a non-boolean acceptor, or a
non-boolean default value is provided in the options, then the flag
will be considered to take a value. Otherwise, it will be considered to
be a boolean switch.</p>

<p>For example, the following pairs of flags are identical:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:a</span>
<span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:a</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-a</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:abc_def</span>
<span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:abc_def</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--abc-def</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:number</span><span class='comma'>,</span> <span class='label'>accept:</span> <span class='const'>Integer</span>
<span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:number</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--number=VAL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>accept:</span> <span class='const'>Integer</span>
</code></pre>

<h3 id="more-examples">More examples</h3>

<p>A flag that sets its value to the number of times it appears on the
command line:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:verbose</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-v</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--verbose</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
     <span class='label'>default:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>handler:</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid__val'>_val</span><span class='comma'>,</span> <span class='id identifier rubyid_count'>count</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>+</span> <span class='int'>1</span> <span class='rbrace'>}</span>
</code></pre>

<p>An example using block form:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:shout</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_flags'>flags</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-s</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--shout</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_default'>default</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_desc'>desc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Say it louder</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_long_desc'>long_desc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This flag says it lowder.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You might use this when people can&#39;t hear you.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Example:</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    toys say --shout hello</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The key to use to retrieve the value from
the execution context.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>flags</span>
      
      
        <span class='type'>(<tt>String...</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The flags in OptionParser format.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>accept</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An acceptor that validates and/or converts the
value. You may provide either the name of an acceptor you have
defined, one of the default acceptors provided by OptionParser, or
any other specification recognized by <span class='object_link'><a href="../Acceptor.html#create-class_method" title="Toys::Acceptor.create (method)">Acceptor.create</a></span>.
Optional. If not specified, accepts any value as a string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>default</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The default value. This is the value that will
be set in the context if this flag is not provided on the command
line. Defaults to <code>nil</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>handler</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>nil</tt>, <tt>:set</tt>, <tt>:push</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An optional handler for
setting/updating the value. A handler is a proc taking two
arguments, the given value and the previous value, returning the
new value that should be set. You may also specify a predefined
named handler. The <code>:set</code> handler (the default) replaces the
previous value (effectively <code>-&gt; (val, _prev) { val }</code>). The
<code>:push</code> handler expects the previous value to be an array and
pushes the given value onto it; it should be combined with setting
<code>default: []</code> and is intended for &quot;multi-valued&quot; flags.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>complete_flags</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A specifier for shell tab completion
for flag names associated with this flag. By default, a
<span class='object_link'><a href="../Flag/DefaultCompletion.html" title="Toys::Flag::DefaultCompletion (class)">Flag::DefaultCompletion</a></span> is used, which provides the flag&#39;s
names as completion candidates. To customize completion, set this
to the name of a previously defined completion, a hash of options
to pass to the constructor for <span class='object_link'><a href="../Flag/DefaultCompletion.html" title="Toys::Flag::DefaultCompletion (class)">Flag::DefaultCompletion</a></span>, or
any other spec recognized by <span class='object_link'><a href="../Completion.html#create-class_method" title="Toys::Completion.create (method)">Completion.create</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>complete_values</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A specifier for shell tab completion
for flag values associated with this flag. This is the empty
completion by default. To customize completion, set this to the
name of a previously defined completion, or any spec recognized by
<span class='object_link'><a href="../Completion.html#create-class_method" title="Toys::Completion.create (method)">Completion.create</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>report_collisions</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Raise an exception if a flag is
requested that is already in use or marked as unusable. Default is
true.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../FlagGroup.html" title="Toys::FlagGroup (module)">Toys::FlagGroup</a></span></tt>, <tt>String</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Group for this flag.
You may provide a group name, a FlagGroup object, or <code>nil</code> which
denotes the default group.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the flag. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of the allowed formats. Defaults to the empty string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag. See <span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for
a description of the allowed formats. (But note that this param
takes an Array of description lines, rather than a series of
arguments.) Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>display_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A display name for this flag, used in help
text and error messages.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Configures the flag. See <span class='object_link'><a href="Flag.html" title="Toys::DSL::Flag (class)">Flag</a></span> for the
directives that can be called in this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


980
981
982
983
984
985
986
987
988
989
990
991
992
993
994
995
996</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 980</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flag'>flag</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_flags'>flags</span><span class='comma'>,</span>
         <span class='label'>accept:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>handler:</span> <span class='kw'>nil</span><span class='comma'>,</span>
         <span class='label'>complete_flags:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>complete_values:</span> <span class='kw'>nil</span><span class='comma'>,</span>
         <span class='label'>report_collisions:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>group:</span> <span class='kw'>nil</span><span class='comma'>,</span>
         <span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>display_name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
         <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_flag_dsl'>flag_dsl</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Flag.html" title="Toys::DSL::Flag (class)">Flag</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_flags'>flags</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='comma'>,</span> <span class='id identifier rubyid_accept'>accept</span><span class='comma'>,</span> <span class='id identifier rubyid_default'>default</span><span class='comma'>,</span> <span class='id identifier rubyid_handler'>handler</span><span class='comma'>,</span> <span class='id identifier rubyid_complete_flags'>complete_flags</span><span class='comma'>,</span> <span class='id identifier rubyid_complete_values'>complete_values</span><span class='comma'>,</span>
    <span class='id identifier rubyid_report_collisions'>report_collisions</span><span class='comma'>,</span> <span class='id identifier rubyid_group'>group</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='comma'>,</span> <span class='id identifier rubyid_display_name'>display_name</span>
  <span class='rparen'>)</span>
  <span class='id identifier rubyid_flag_dsl'>flag_dsl</span><span class='period'>.</span><span class='id identifier rubyid_instance_exec'>instance_exec</span><span class='lparen'>(</span><span class='id identifier rubyid_flag_dsl'>flag_dsl</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_flag_dsl'>flag_dsl</span><span class='period'>.</span><span class='id identifier rubyid__add_to'>_add_to</span><span class='lparen'>(</span><span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_maybe_add_getter'>maybe_add_getter</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flag_group-instance_method">
  
    #<strong>flag_group</strong>(type: :optional, desc: nil, long_desc: nil, name: nil, report_collisions: true, prepend: false, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a flag group. If a block is given, flags defined in the block
belong to the group. The flags in the group are listed together in
help screens.</p>

<h3 id="example">Example</h3>

<p>The following example creates a flag group in which all flags are
optional.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>execute</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_flag_group'>flag_group</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Debug Flags</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:debug</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-D</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Enable debugger</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='symbol'>:warnings</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-W[VAL]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Enable warnings</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='comment'># ...
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:optional</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The type of group. Allowed values: <code>:required</code>,
<code>:optional</code>, <code>:exactly_one</code>, <code>:at_most_one</code>, <code>:at_least_one</code>.
Default is <code>:optional</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the group. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of allowed formats. Defaults to <code>&quot;Flags&quot;</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag group. See
<span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for a description of allowed formats.
Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The name of the group, or nil for no
name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>report_collisions</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raise an exception if a
the given name is already taken. If <code>false</code>, ignore. Default is
<code>true</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prepend</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, prepend rather than append the
group to the list. Default is <code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Adds flags to the group. See <span class='object_link'><a href="FlagGroup.html" title="Toys::DSL::FlagGroup (class)">FlagGroup</a></span>
for the directives that can be called in this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


628
629
630
631
632
633
634
635
636
637
638</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 628</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flag_group'>flag_group</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='symbol'>:optional</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>report_collisions:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>prepend:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_add_flag_group'>add_flag_group</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='label'>desc:</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
                          <span class='label'>report_collisions:</span> <span class='id identifier rubyid_report_collisions'>report_collisions</span><span class='comma'>,</span> <span class='label'>prepend:</span> <span class='id identifier rubyid_prepend'>prepend</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_group'>group</span> <span class='op'>=</span> <span class='id identifier rubyid_prepend'>prepend</span> <span class='op'>?</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_flag_groups'>flag_groups</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>:</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_flag_groups'>flag_groups</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
  <span class='id identifier rubyid_flag_group_dsl'>flag_group_dsl</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FlagGroup.html" title="Toys::DSL::FlagGroup (class)">FlagGroup</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='comma'>,</span> <span class='id identifier rubyid_group'>group</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_flag_group_dsl'>flag_group_dsl</span><span class='period'>.</span><span class='id identifier rubyid_instance_exec'>instance_exec</span><span class='lparen'>(</span><span class='id identifier rubyid_flag_group_dsl'>flag_group_dsl</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="include-instance_method">
  
    #<strong>include</strong>(mixin, *args, **kwargs)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specify that the given module should be mixed into this tool, and its
methods made available when running the tool.</p>

<p>You may provide either a module, the string name of a mixin that you
have defined in this tool or one of its ancestors, or the symbol name
of a well-known mixin.</p>

<h3 id="example">Example</h3>

<p>Include the well-known mixin <code>:terminal</code> and perform some terminal
magic.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spin</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_include'>include</span> <span class='symbol'>:terminal</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='comment'># The spinner method is defined by the :terminal mixin.
</span>    <span class='id identifier rubyid_spinner'>spinner</span><span class='lparen'>(</span><span class='label'>leading_text:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Waiting...</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>final_text:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>5</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mixin</span>
      
      
        <span class='type'>(<tt>Module</tt>, <tt>Symbol</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Module or module name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Object...</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Arguments to pass to the initializer</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kwargs</span>
      
      
        <span class='type'>(<tt>keywords</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Keyword arguments to pass to the initializer</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1520
1521
1522
1523
1524
1525
1526</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1520</span>

<span class='kw'>def</span> <span class='id identifier rubyid_include'>include</span><span class='lparen'>(</span><span class='id identifier rubyid_mixin'>mixin</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_mod'>mod</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_resolve_mixin'>resolve_mixin</span><span class='lparen'>(</span><span class='id identifier rubyid_mixin'>mixin</span><span class='comma'>,</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='comma'>,</span> <span class='ivar'>@__loader</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_include_mixin'>include_mixin</span><span class='lparen'>(</span><span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="include?-instance_method">
  
    #<strong>include?</strong>(mod)  &#x21d2; <tt>Boolean</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Determine if the given module/mixin has already been included.</p>

<p>You may provide either a module, the string name of a mixin that you
have defined in this tool or one of its ancestors, or the symbol name
of a well-known mixin.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mod</span>
      
      
        <span class='type'>(<tt>Module</tt>, <tt>Symbol</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Module or module name.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whether the mixin is included</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the current tool is not active.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1540
1541
1542
1543
1544</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1540</span>

<span class='kw'>def</span> <span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_mod'>mod</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_resolve_mixin'>resolve_mixin</span><span class='lparen'>(</span><span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='comma'>,</span> <span class='ivar'>@__loader</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load-instance_method">
  
    #<strong>load</strong>(path, as: nil)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Load another config file or directory, as if its contents were inserted
at the current location.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The file or directory to load.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>as</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Load into the given tool/namespace. If omitted,
configuration will be loaded into the current namespace.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


406
407
408
409
410
411
412
413
414
415</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 406</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>as:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_as'>as</span>
    <span class='id identifier rubyid_tool'>tool</span><span class='lparen'>(</span><span class='id identifier rubyid_as'>as</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='ivar'>@__loader</span><span class='period'>.</span><span class='id identifier rubyid_load_path'>load_path</span><span class='lparen'>(</span><span class='id identifier rubyid_source_info'>source_info</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='ivar'>@__words</span><span class='comma'>,</span> <span class='ivar'>@__remaining_words</span><span class='comma'>,</span> <span class='ivar'>@__priority</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_git-instance_method">
  
    #<strong>load_git</strong>(remote: nil, path: nil, commit: nil, as: nil, update: false)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Load configuration from a public git repository, as if its contents
were inserted at the current location.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>remote</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The URL of the git repository. Defaults to the
current repository if already loading from git.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The path within the repo to the file or directory
to load. Defaults to the root of the repo.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>commit</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The commit branch, tag, or sha. Defaults to the
current commit if already loading from git, or to <code>HEAD</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>as</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Load into the given tool/namespace. If omitted,
configuration will be loaded into the current namespace.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>update</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Force-fetch from the remote (unless the commit
is a SHA). This will ensure that symbolic commits, such as branch
names, are up to date. Default is false.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../ToolDefinitionError.html" title="Toys::ToolDefinitionError (class)">ToolDefinitionError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 435</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_git'>load_git</span><span class='lparen'>(</span><span class='label'>remote:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>path:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>commit:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>as:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>update:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_as'>as</span>
    <span class='id identifier rubyid_tool'>tool</span><span class='lparen'>(</span><span class='id identifier rubyid_as'>as</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_load_git'>load_git</span><span class='lparen'>(</span><span class='label'>remote:</span> <span class='id identifier rubyid_remote'>remote</span><span class='comma'>,</span> <span class='label'>path:</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>commit:</span> <span class='id identifier rubyid_commit'>commit</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_remote'>remote</span> <span class='op'>||=</span> <span class='id identifier rubyid_source_info'>source_info</span><span class='period'>.</span><span class='id identifier rubyid_git_remote'>git_remote</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../ToolDefinitionError.html" title="Toys::ToolDefinitionError (class)">ToolDefinitionError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Git remote not specified</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_remote'>remote</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_commit'>commit</span> <span class='op'>||=</span> <span class='id identifier rubyid_source_info'>source_info</span><span class='period'>.</span><span class='id identifier rubyid_git_commit'>git_commit</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@__loader</span><span class='period'>.</span><span class='id identifier rubyid_load_git'>load_git</span><span class='lparen'>(</span><span class='id identifier rubyid_source_info'>source_info</span><span class='comma'>,</span> <span class='id identifier rubyid_remote'>remote</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_commit'>commit</span><span class='comma'>,</span>
                     <span class='ivar'>@__words</span><span class='comma'>,</span> <span class='ivar'>@__remaining_words</span><span class='comma'>,</span> <span class='ivar'>@__priority</span><span class='comma'>,</span>
                     <span class='label'>update:</span> <span class='id identifier rubyid_update'>update</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="long_desc-instance_method">
  
    #<strong>long_desc</strong>(*strs, file: nil, data: nil)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add to the long description for the current tool. The long description
is displayed in the usage documentation for the tool itself. This
directive may be given multiple times, and the results are cumulative.</p>

<p>A long description is a series of descriptions, which are generally
displayed in a series of lines/paragraphs. Each individual description
uses the form described in the <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> documentation, and may be
word-wrapped when displayed. To insert a blank line, include an empty
string as one of the descriptions.</p>

<h3 id="example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_long_desc'>long_desc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This initial paragraph might get word wrapped.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This next paragraph is followed by a blank line.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This line will not be wrapped.</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
          <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    This indent is preserved.</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='id identifier rubyid_long_desc'>long_desc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This line is appended to the description.</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>strs</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>, <tt>String</tt>, <tt>Array&lt;String&gt;...</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional. Read the description from the given file
provided relative to the current toys file. The file must be a
plain text file whose suffix is <code>.txt</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional. Read the description from the given data
file. The file must be a plain text file whose suffix is <code>.txt</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 572</span>

<span class='kw'>def</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_strs'>strs</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>data:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_source_info'>source_info</span><span class='period'>.</span><span class='id identifier rubyid_source_path'>source_path</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../ToolDefinitionError.html" title="Toys::ToolDefinitionError (class)">ToolDefinitionError</a></span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot set long_desc from a file because the tool is not defined in a file</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_source_info'>source_info</span><span class='period'>.</span><span class='id identifier rubyid_source_path'>source_path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_data'>data</span>
    <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_source_info'>source_info</span><span class='period'>.</span><span class='id identifier rubyid_find_data'>find_data</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='symbol'>:file</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_strs'>strs</span> <span class='op'>+=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_load_long_desc_file'>load_long_desc_file</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_append_long_desc'>append_long_desc</span><span class='lparen'>(</span><span class='id identifier rubyid_strs'>strs</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mixin-instance_method">
  
    #<strong>mixin</strong>(name, mixin_module = nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a named mixin module that can be included by name from this tool
or its subtools.</p>

<p>A mixin is a module that defines methods that can be called from a
tool. It is commonly used to provide &quot;utility&quot; methods, implementing
common functionality and allowing tools to share code.</p>

<p>Normally you provide a block and define the mixin&#39;s methods in that
block. Alternatively, you can create a module separately and pass it
directly to this directive.</p>

<h3 id="example">Example</h3>

<p>The following example creates a named mixin and uses it in a tool.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_mixin'>mixin</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error-reporter</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_message'>message</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>An error occurred: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>build</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_include'>include</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error-reporter</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Building...</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Build failed!</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Name of the mixin</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>mixin_module</span>
      
      
        <span class='type'>(<tt>Module</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Module to use as the mixin. Optional.
Either pass a module here, <em>or</em> provide a block and define the
mixin within the block.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Defines the mixin module.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 146</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mixin'>mixin</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mixin_module'>mixin_module</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='op'>&amp;.</span><span class='id identifier rubyid_add_mixin'>add_mixin</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mixin_module'>mixin_module</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_interrupt-instance_method">
  
    #<strong>on_interrupt</strong>(handler = nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specify how to handle interrupts.</p>

<p>You may pass a block to be called, or the name of a method to call. In
either case, the block or method should take one argument, the
Interrupt exception that was raised.</p>

<h3 id="example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>10</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_on_interrupt'>on_interrupt</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>I was interrupted.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>handler</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The interrupt callback proc or method
name. Pass nil to disable interrupt handling.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The interrupt callback as a block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1453
1454
1455
1456
1457
1458</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1453</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_interrupt'>on_interrupt</span><span class='lparen'>(</span><span class='id identifier rubyid_handler'>handler</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_interrupt_handler'>interrupt_handler</span> <span class='op'>=</span> <span class='id identifier rubyid_handler'>handler</span> <span class='op'>||</span> <span class='id identifier rubyid_block'>block</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_usage_error-instance_method">
  
    #<strong>on_usage_error</strong>(handler = nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specify how to handle usage errors.</p>

<p>You may pass a block to be called, or the name of a method to call. In
either case, the block or method should take one argument, the array of
usage errors reported.</p>

<h3 id="example">Example</h3>

<p>This tool runs even if a usage error is encountered. You can find info
on the errors from <span class='object_link'><a href="../Context/Key.html#USAGE_ERRORS-constant" title="Toys::Context::Key::USAGE_ERRORS (constant)">Context::Key::USAGE_ERRORS</a></span>,
<span class='object_link'><a href="../Context/Key.html#UNMATCHED_ARGS-constant" title="Toys::Context::Key::UNMATCHED_ARGS (constant)">Context::Key::UNMATCHED_ARGS</a></span>, and similar keys.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Errors: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_usage_errors'>usage_errors</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_on_usage_error'>on_usage_error</span> <span class='symbol'>:run</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>handler</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The interrupt callback proc or method
name. Pass nil to disable interrupt handling.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The interrupt callback as a block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1485
1486
1487
1488
1489
1490</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1485</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_usage_error'>on_usage_error</span><span class='lparen'>(</span><span class='id identifier rubyid_handler'>handler</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_usage_error_handler'>usage_error_handler</span> <span class='op'>=</span> <span class='id identifier rubyid_handler'>handler</span> <span class='op'>||</span> <span class='id identifier rubyid_block'>block</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="optional_arg-instance_method">
  
    #<strong>optional_arg</strong>(key, default: nil, accept: nil, complete: nil, display_name: nil, desc: nil, long_desc: nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='optional-instance_method'>optional</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add an optional positional argument to the current tool. You must
specify a key which the script may use to obtain the argument value
from the context. If an optional argument is not given on the command
line, the value is set to the given default.</p>

<p>If the given key is a symbol representing a valid method name, then a
helper method is automatically added to retrieve the value. Otherwise,
if the key is a string or does not represent a valid method name, the
tool can retrieve the value by calling <span class='object_link'><a href="../Context.html#get-instance_method" title="Toys::Context#get (method)">Context#get</a></span>.</p>

<p>Attributes of the arg may be passed in as arguments to this method, or
set in a block passed to this method. If you provide a block, you can
use directives in <span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span> within the block.</p>

<h3 id="example">Example</h3>

<p>This tool creates a &quot;link&quot; to a given target. The link location is
optional; if it is not given, it is inferred from the target.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ln</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_required_arg'>required_arg</span> <span class='symbol'>:target</span>
  <span class='id identifier rubyid_optional_arg'>optional_arg</span> <span class='symbol'>:location</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_loc'>loc</span> <span class='op'>=</span> <span class='id identifier rubyid_location'>location</span> <span class='op'>||</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_target'>target</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>linking to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_content'> from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_loc'>loc</span><span class='embexpr_end'>}</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The key to use to retrieve the value from
the execution context.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>default</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The default value. This is the value that will
be set in the context if this argument is not provided on the
command line. Defaults to <code>nil</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>accept</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An acceptor that validates and/or converts the
value. You may provide either the name of an acceptor you have
defined, one of the default acceptors provided by OptionParser, or
any other specification recognized by <span class='object_link'><a href="../Acceptor.html#create-class_method" title="Toys::Acceptor.create (method)">Acceptor.create</a></span>.
Optional. If not specified, accepts any value as a string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>complete</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A specifier for shell tab completion for
values of this arg. This is the empty completion by default. To
customize completion, set this to the name of a previously defined
completion, or any spec recognized by <span class='object_link'><a href="../Completion.html#create-class_method" title="Toys::Completion.create (method)">Completion.create</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>display_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A name to use for display (in help text
and error reports). Defaults to the key in upper case.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the flag. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of the allowed formats. Defaults to the empty string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag. See <span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for
a description of the allowed formats. (But note that this param
takes an Array of description lines, rather than a series of
arguments.) Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Configures the positional argument. See
<span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span> for the directives that can be called in
this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1123
1124
1125
1126
1127
1128
1129
1130
1131
1132
1133
1134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_optional_arg'>optional_arg</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span>
                 <span class='label'>default:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>accept:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>complete:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>display_name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                 <span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                 <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_accept'>accept</span><span class='comma'>,</span> <span class='id identifier rubyid_default'>default</span><span class='comma'>,</span> <span class='id identifier rubyid_complete'>complete</span><span class='comma'>,</span> <span class='id identifier rubyid_display_name'>display_name</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='period'>.</span><span class='id identifier rubyid_instance_exec'>instance_exec</span><span class='lparen'>(</span><span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='period'>.</span><span class='id identifier rubyid__add_optional_to'>_add_optional_to</span><span class='lparen'>(</span><span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_maybe_add_getter'>maybe_add_getter</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remaining_args-instance_method">
  
    #<strong>remaining_args</strong>(key, default: [], accept: nil, complete: nil, display_name: nil, desc: nil, long_desc: nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='remaining-instance_method'>remaining</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specify what should be done with unmatched positional arguments. You
must specify a key which the script may use to obtain the remaining
args from the context.</p>

<p>If the given key is a symbol representing a valid method name, then a
helper method is automatically added to retrieve the value. Otherwise,
if the key is a string or does not represent a valid method name, the
tool can retrieve the value by calling <span class='object_link'><a href="../Context.html#get-instance_method" title="Toys::Context#get (method)">Context#get</a></span>.</p>

<p>Attributes of the arg may be passed in as arguments to this method, or
set in a block passed to this method. If you provide a block, you can
use directives in <span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span> within the block.</p>

<h3 id="example">Example</h3>

<p>This tool displays a &quot;list&quot; of the given directories. If no directories
ar given, lists the current directory.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ln</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_remaining_args'>remaining_args</span> <span class='symbol'>:directories</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_dirs'>dirs</span> <span class='op'>=</span> <span class='id identifier rubyid_directories'>directories</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_pwd'>pwd</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_directories'>directories</span>
    <span class='id identifier rubyid_dirs'>dirs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Listing directory </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir'>dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The key to use to retrieve the value from
the execution context.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>default</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The default value. This is the value that will
be set in the context if no unmatched arguments are provided on the
command line. Defaults to the empty array <code>[]</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>accept</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An acceptor that validates and/or converts the
value. You may provide either the name of an acceptor you have
defined, one of the default acceptors provided by OptionParser, or
any other specification recognized by <span class='object_link'><a href="../Acceptor.html#create-class_method" title="Toys::Acceptor.create (method)">Acceptor.create</a></span>.
Optional. If not specified, accepts any value as a string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>complete</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A specifier for shell tab completion for
values of this arg. This is the empty completion by default. To
customize completion, set this to the name of a previously defined
completion, or any spec recognized by <span class='object_link'><a href="../Completion.html#create-class_method" title="Toys::Completion.create (method)">Completion.create</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>display_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A name to use for display (in help text
and error reports). Defaults to the key in upper case.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the flag. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of the allowed formats. Defaults to the empty string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag. See <span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for
a description of the allowed formats. (But note that this param
takes an Array of description lines, rather than a series of
arguments.) Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Configures the positional argument. See
<span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span> for the directives that can be called in
this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remaining_args'>remaining_args</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span>
                   <span class='label'>default:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>accept:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>complete:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>display_name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                   <span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                   <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_accept'>accept</span><span class='comma'>,</span> <span class='id identifier rubyid_default'>default</span><span class='comma'>,</span> <span class='id identifier rubyid_complete'>complete</span><span class='comma'>,</span> <span class='id identifier rubyid_display_name'>display_name</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='period'>.</span><span class='id identifier rubyid_instance_exec'>instance_exec</span><span class='lparen'>(</span><span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='period'>.</span><span class='id identifier rubyid__set_remaining_on'>_set_remaining_on</span><span class='lparen'>(</span><span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_maybe_add_getter'>maybe_add_getter</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_exact_flag_match-instance_method">
  
    #<strong>require_exact_flag_match</strong>(state = true)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Require that flags must match exactly. That is, flags must appear in
their entirety on the command line. (If false, substrings of flags are
accepted as long as they are unambiguous.)</p>

<p>Issuing this directive by itself turns on exact match. You may turn it
off by passsing <code>false</code> as the parameter.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1315
1316
1317
1318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1315</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_exact_flag_match'>require_exact_flag_match</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_require_exact_flag_match'>require_exact_flag_match</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="required_arg-instance_method">
  
    #<strong>required_arg</strong>(key, accept: nil, complete: nil, display_name: nil, desc: nil, long_desc: nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='required-instance_method'>required</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add a required positional argument to the current tool. You must
specify a key which the script may use to obtain the argument value
from the context.</p>

<p>If the given key is a symbol representing a valid method name, then a
helper method is automatically added to retrieve the value. Otherwise,
if the key is a string or does not represent a valid method name, the
tool can retrieve the value by calling <span class='object_link'><a href="../Context.html#get-instance_method" title="Toys::Context#get (method)">Context#get</a></span>.</p>

<p>Attributes of the arg may be passed in as arguments to this method, or
set in a block passed to this method. If you provide a block, you can
use directives in <span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span> within the block.</p>

<h3 id="example">Example</h3>

<p>This tool &quot;moves&quot; something from a source to destination, and takes two
required arguments:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mv</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_required_arg'>required_arg</span> <span class='symbol'>:source</span>
  <span class='id identifier rubyid_required_arg'>required_arg</span> <span class='symbol'>:dest</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>moving from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_source'>source</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dest'>dest</span><span class='embexpr_end'>}</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The key to use to retrieve the value from
the execution context.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>accept</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An acceptor that validates and/or converts the
value. You may provide either the name of an acceptor you have
defined, one of the default acceptors provided by OptionParser, or
any other specification recognized by <span class='object_link'><a href="../Acceptor.html#create-class_method" title="Toys::Acceptor.create (method)">Acceptor.create</a></span>.
Optional. If not specified, accepts any value as a string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>complete</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A specifier for shell tab completion for
values of this arg. This is the empty completion by default. To
customize completion, set this to the name of a previously defined
completion, or any spec recognized by <span class='object_link'><a href="../Completion.html#create-class_method" title="Toys::Completion.create (method)">Completion.create</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>display_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A name to use for display (in help text
and error reports). Defaults to the key in upper case.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>, <tt><span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Short
description for the flag. See <span class='object_link'><a href="#desc-instance_method" title="Toys::DSL::Tool#desc (method)">#desc</a></span> for a
description of the allowed formats. Defaults to the empty string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>long_desc</span>
      
      
        <span class='type'>(<tt>Array&lt;String,Array&lt;String&gt;,<span class='object_link'><a href="../WrappableString.html" title="Toys::WrappableString (class)">Toys::WrappableString</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Long description for the flag. See <span class='object_link'><a href="#long_desc-instance_method" title="Toys::DSL::Tool#long_desc (method)">#long_desc</a></span> for
a description of the allowed formats. (But note that this param
takes an Array of description lines, rather than a series of
arguments.) Defaults to the empty array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Configures the positional argument. See
<span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span> for the directives that can be called in
this block.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1051</span>

<span class='kw'>def</span> <span class='id identifier rubyid_required_arg'>required_arg</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span>
                 <span class='label'>accept:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>complete:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>display_name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                 <span class='label'>desc:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>long_desc:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                 <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PositionalArg.html" title="Toys::DSL::PositionalArg (class)">PositionalArg</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_accept'>accept</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_complete'>complete</span><span class='comma'>,</span> <span class='id identifier rubyid_display_name'>display_name</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_long_desc'>long_desc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='period'>.</span><span class='id identifier rubyid_instance_exec'>instance_exec</span><span class='lparen'>(</span><span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_arg_dsl'>arg_dsl</span><span class='period'>.</span><span class='id identifier rubyid__add_required_to'>_add_required_to</span><span class='lparen'>(</span><span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_maybe_add_getter'>maybe_add_getter</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set-instance_method">
  
    
      <span class="overload">#<strong>set</strong>(key, value)  &#x21d2; <tt>self</tt> </span>
    
      <span class="overload">#<strong>set</strong>(hash)  &#x21d2; <tt>self</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set a option values statically without creating helper methods.</p>

<h3 id="example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_set'>set</span> <span class='symbol'>:greeting</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hi there</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='symbol'>:greeting</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, world!</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>set</strong>(key, value)  &#x21d2; <tt>self</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Set a single value by key.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The key to use to retrieve the value from
the execution context.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The value to set.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>set</strong>(hash)  &#x21d2; <tt>self</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Set multiple keys and values</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>hash</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The keys and values to set</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1277
1278
1279
1280
1281
1282
1283
1284
1285
1286</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1277</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set'>set</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_default_data'>default_data</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_default_data'>default_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_context_directory-instance_method">
  
    #<strong>set_context_directory</strong>(dir)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set a custom context directory for this tool.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dir</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Context directory</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1616
1617
1618
1619
1620
1621</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1616</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_context_directory'>set_context_directory</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span> <span class='comment'># rubocop:disable Naming/AccessorMethodName
</span>  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_custom_context_directory'>custom_context_directory</span> <span class='op'>=</span> <span class='id identifier rubyid_dir'>dir</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="settings-instance_method">
  
    #<strong>settings</strong>  &#x21d2; <tt><span class='object_link'><a href="../ToolDefinition/Settings.html" title="Toys::ToolDefinition::Settings (class)">Toys::ToolDefinition::Settings</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the settings for this tool.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../ToolDefinition/Settings.html" title="Toys::ToolDefinition::Settings (class)">Toys::ToolDefinition::Settings</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Tool-specific settings.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1685
1686
1687</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1685</span>

<span class='kw'>def</span> <span class='id identifier rubyid_settings'>settings</span>
  <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_settings'>settings</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="source_info-instance_method">
  
    #<strong>source_info</strong>  &#x21d2; <tt><span class='object_link'><a href="../SourceInfo.html" title="Toys::SourceInfo (class)">Toys::SourceInfo</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return the current source info object.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../SourceInfo.html" title="Toys::SourceInfo (class)">Toys::SourceInfo</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Source info.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1551
1552
1553</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1551</span>

<span class='kw'>def</span> <span class='id identifier rubyid_source_info'>source_info</span>
  <span class='ivar'>@__source</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="static-instance_method">
  
    
      <span class="overload">#<strong>static</strong>(key, value)  &#x21d2; <tt>self</tt> </span>
    
      <span class="overload">#<strong>static</strong>(hash)  &#x21d2; <tt>self</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set a option values statically and create a helper method.</p>

<p>If any given key is a symbol representing a valid method name, then a
helper method is automatically added to retrieve the value. Otherwise,
if the key is a string or does not represent a valid method name, the
tool can retrieve the value by calling <span class='object_link'><a href="../Context.html#get-instance_method" title="Toys::Context#get (method)">Context#get</a></span>.</p>

<h3 id="example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_static'>static</span> <span class='symbol'>:greeting</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hi there</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_greeting'>greeting</span><span class='embexpr_end'>}</span><span class='tstring_content'>, world!</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>static</strong>(key, value)  &#x21d2; <tt>self</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Set a single value by key.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The key to use to retrieve the value from
the execution context.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The value to set.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>static</strong>(hash)  &#x21d2; <tt>self</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Set multiple keys and values</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>hash</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The keys and values to set</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1238
1239
1240
1241
1242
1243
1244
1245
1246
1247
1248
1249
1250
1251</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_static'>static</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_default_data'>default_data</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_each_key'>each_key</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
      <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_maybe_add_getter'>maybe_add_getter</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_default_data'>default_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_maybe_add_getter'>maybe_add_getter</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="subtool_apply-instance_method">
  
    #<strong>subtool_apply</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Applies the given block to all subtools, recursively. Effectively, the
given block is run at the <em>end</em> of every tool block. This can be used,
for example, to provide some shared configuration for all tools.</p>

<p>The block is applied only to subtools defined <em>after</em> the block
appears. Subtools defined before the block appears are not affected.</p>

<h3 id="example">Example</h3>

<p>It is common for tools to use the <code>:exec</code> mixin to invoke external
programs. This example automatically includes the exec mixin in all
subtools, recursively, so you do not have to repeat the <code>include</code>
directive in every tool.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .toys.rb
</span>
<span class='id identifier rubyid_subtool_apply'>subtool_apply</span> <span class='kw'>do</span>
  <span class='comment'># Include the mixin only if the tool hasn&#39;t already done so
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:exec</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_include'>include</span> <span class='symbol'>:exec</span><span class='comma'>,</span> <span class='label'>exit_on_nonzero_status:</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='comment'># This tool has access to methods defined by the :exec mixin
</span>    <span class='comment'># because the above block is applied to the tool.
</span>    <span class='id identifier rubyid_sh'>sh</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>echo hello</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1655
1656
1657
1658
1659
1660
1661</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1655</span>

<span class='kw'>def</span> <span class='id identifier rubyid_subtool_apply'>subtool_apply</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_subtool_middleware_stack'>subtool_middleware_stack</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:apply_config</span><span class='comma'>,</span>
                                        <span class='label'>parent_source:</span> <span class='id identifier rubyid_source_info'>source_info</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="template-instance_method">
  
    #<strong>template</strong>(name, template_class = nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a named template that can be expanded by name from this tool
or its subtools.</p>

<p>A template is an object that generates DSL directives. You can use it
to build &quot;prefabricated&quot; tools, and then instantiate them in your Toys
files. Generally, a template is a class with an associated <code>expansion</code>
procedure. The class defines parameters for the template expansion,
and <code>expansion</code> includes DSL directives that should be run based on
those parameters.</p>

<p>Normally, you provide a block and define the template class in that
block. Most templates will define an <code>initialize</code> method that takes any
arguments passed into the template expansion. The template must also
provide an <code>expansion</code> block showing how to use the template object to
produce DSL directives.</p>

<p>Alternately, you can create a template class separately and pass it
directly. See <span class='object_link'><a href="../Template.html" title="Toys::Template (module)">Template</a></span> for details on creating a template
class.</p>

<h3 id="example">Example</h3>

<p>The following example creates and uses a simple template.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello-generator</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
    <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='ivar'>@message</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:message</span>
  <span class='id identifier rubyid_expansion'>expansion</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_template'>template</span><span class='op'>|</span>
    <span class='id identifier rubyid_tool'>tool</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_to_run'>to_run</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_expand'>expand</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello-generator</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mytool</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mytool is running!</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Name of the template</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>template_class</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Module to use as the mixin. Optional.
Either pass a module here, <em>or</em> provide a block and define the
mixin within the block.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Defines the template class.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 201</span>

<span class='kw'>def</span> <span class='id identifier rubyid_template'>template</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_template_class'>template_class</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_add_template'>add_template</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_template_class'>template_class</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_run-instance_method">
  
    #<strong>to_run</strong>(&amp;block)  &#x21d2; <tt>self</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='on_run-instance_method'>on_run</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specify how to run this tool. Typically you do this by defining a
method namd <code>run</code>. Alternatively, however, you can pass a block to the
<code>to_run</code> method.</p>

<p>You may want to do this if your method needs access to local variables
in the lexical scope. However, it is often more convenient to use
<span class='object_link'><a href="#static-instance_method" title="Toys::DSL::Tool#static (method)">#static</a></span> to set the value in the context.)</p>

<h3 id="example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_cur_time'>cur_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_to_run'>to_run</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The time at tool definition was </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cur_time'>cur_time</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The run method.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1422
1423
1424
1425
1426
1427</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1422</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_run'>to_run</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_current_tool'>current_tool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_cur_tool'>cur_tool</span><span class='period'>.</span><span class='id identifier rubyid_run_handler'>run_handler</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tool-instance_method">
  
    #<strong>tool</strong>(words, if_defined: :combine, delegate_to: nil, delegate_relative: nil, &amp;block)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a subtool. You must provide a block defining the subtool.</p>

<h3 id="example">Example</h3>

<p>The following example defines a tool and two subtools within it.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>build</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>staging</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Building staging</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>production</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Building production</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>The following example uses <code>delegate_to</code> to define a tool that runs one
of its subtools.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>delegate_to:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unit</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_tool'>tool</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unit</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Running unit tests</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>words</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the subtool</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>if_defined</span>
      
      
        <span class='type'>(<tt>:combine</tt>, <tt>:reset</tt>, <tt>:ignore</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:combine</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>What to do if a definition
already exists for this tool. Possible values are <code>:combine</code> (the
default) indicating the definition should be combined with the
existing definition, <code>:reset</code> indicating the earlier definition
should be reset and the new definition applied instead, or
<code>:ignore</code> indicating the new definition should be ignored.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delegate_to</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional. This tool should
delegate to another tool, specified by the full path. This path may
be given as an array of strings, or a single string possibly
delimited by path separators.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delegate_relative</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional. Similar to
delegate_to, but takes a delegate name relative to the context in
which this tool is being defined.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Defines the subtool.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 304</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tool'>tool</span><span class='lparen'>(</span><span class='id identifier rubyid_words'>words</span><span class='comma'>,</span> <span class='label'>if_defined:</span> <span class='symbol'>:combine</span><span class='comma'>,</span> <span class='label'>delegate_to:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>delegate_relative:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_subtool_words'>subtool_words</span><span class='comma'>,</span> <span class='id identifier rubyid_next_remaining'>next_remaining</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../DSL.html" title="Toys::DSL (module)">DSL</a></span></span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id identifier rubyid_analyze_name'>analyze_name</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_words'>words</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_subtool'>subtool</span> <span class='op'>=</span> <span class='ivar'>@__loader</span><span class='period'>.</span><span class='id identifier rubyid_get_tool'>get_tool</span><span class='lparen'>(</span><span class='id identifier rubyid_subtool_words'>subtool_words</span><span class='comma'>,</span> <span class='ivar'>@__priority</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_subtool'>subtool</span><span class='period'>.</span><span class='id identifier rubyid_includes_definition?'>includes_definition?</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_if_defined'>if_defined</span>
    <span class='kw'>when</span> <span class='symbol'>:ignore</span>
      <span class='kw'>return</span> <span class='kw'>self</span>
    <span class='kw'>when</span> <span class='symbol'>:reset</span>
      <span class='id identifier rubyid_subtool'>subtool</span><span class='period'>.</span><span class='id identifier rubyid_reset_definition'>reset_definition</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_delegate_to'>delegate_to</span> <span class='op'>||</span> <span class='id identifier rubyid_delegate_relative'>delegate_relative</span>
    <span class='id identifier rubyid_delegate_to2'>delegate_to2</span> <span class='op'>=</span> <span class='ivar'>@__words</span> <span class='op'>+</span> <span class='ivar'>@__loader</span><span class='period'>.</span><span class='id identifier rubyid_split_path'>split_path</span><span class='lparen'>(</span><span class='id identifier rubyid_delegate_relative'>delegate_relative</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_delegate_relative'>delegate_relative</span>
    <span class='id identifier rubyid_orig_block'>orig_block</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_delegate_to'>delegate_to</span><span class='lparen'>(</span><span class='id identifier rubyid_delegate_to'>delegate_to</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_delegate_to'>delegate_to</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_delegate_to'>delegate_to</span><span class='lparen'>(</span><span class='id identifier rubyid_delegate_to2'>delegate_to2</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_delegate_to2'>delegate_to2</span>
      <span class='id identifier rubyid_instance_eval'>instance_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_orig_block'>orig_block</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_orig_block'>orig_block</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='ivar'>@__loader</span><span class='period'>.</span><span class='id identifier rubyid_load_block'>load_block</span><span class='lparen'>(</span><span class='id identifier rubyid_source_info'>source_info</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='comma'>,</span> <span class='id identifier rubyid_subtool_words'>subtool_words</span><span class='comma'>,</span> <span class='id identifier rubyid_next_remaining'>next_remaining</span><span class='comma'>,</span> <span class='ivar'>@__priority</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="toys_version!-instance_method">
  
    #<strong>toys_version!</strong>(*requirements)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Asserts that the current Toys version against the given requirements,
raising an exception if not.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../ToolDefinitionError.html" title="Toys::ToolDefinitionError (class)">Toys::ToolDefinitionError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the current Toys version does not
satisfy the requirements.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1711
1712
1713
1714
1715
1716
1717
1718
1719
1720</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1711</span>

<span class='kw'>def</span> <span class='id identifier rubyid_toys_version!'>toys_version!</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_requirements'>requirements</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rubygems</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Gem</span><span class='op'>::</span><span class='const'>Version</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Core.html" title="Toys::Core (module)">Core</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Core.html#VERSION-constant" title="Toys::Core::VERSION (constant)">VERSION</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_requirement'>requirement</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_requirements'>requirements</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_requirement'>requirement</span><span class='period'>.</span><span class='id identifier rubyid_satisfied_by?'>satisfied_by?</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../ToolDefinitionError.html" title="Toys::ToolDefinitionError (class)">ToolDefinitionError</a></span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Toys version requirements </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_requirement'>requirement</span><span class='embexpr_end'>}</span><span class='tstring_content'> not satisfied by {version}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="toys_version?-instance_method">
  
    #<strong>toys_version?</strong>(*requirements)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Determines whether the current Toys version satisfies the given
requirements.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>whether or not the requirements are satisfied</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1695
1696
1697
1698
1699
1700</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1695</span>

<span class='kw'>def</span> <span class='id identifier rubyid_toys_version?'>toys_version?</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_requirements'>requirements</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rubygems</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Gem</span><span class='op'>::</span><span class='const'>Version</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Core.html" title="Toys::Core (module)">Core</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Core.html#VERSION-constant" title="Toys::Core::VERSION (constant)">VERSION</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_requirement'>requirement</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_requirements'>requirements</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_requirement'>requirement</span><span class='period'>.</span><span class='id identifier rubyid_satisfied_by?'>satisfied_by?</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="truncate_load_path!-instance_method">
  
    #<strong>truncate_load_path!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Remove lower-priority sources from the load path. This prevents lower-
priority sources (such as Toys files from parent or global directories)
from executing or defining tools.</p>

<p>This works only if no such sources have already loaded yet.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../ToolDefinitionError.html" title="Toys::ToolDefinitionError (class)">Toys::ToolDefinitionError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if any lower-priority tools have
already been loaded.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1673
1674
1675
1676
1677
1678</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/dsl/tool.rb', line 1673</span>

<span class='kw'>def</span> <span class='id identifier rubyid_truncate_load_path!'>truncate_load_path!</span>
  <span class='kw'>unless</span> <span class='ivar'>@__loader</span><span class='period'>.</span><span class='id identifier rubyid_stop_loading_at_priority'>stop_loading_at_priority</span><span class='lparen'>(</span><span class='ivar'>@__priority</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../ToolDefinitionError.html" title="Toys::ToolDefinitionError (class)">ToolDefinitionError</a></span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot truncate load path because tools have already been loaded</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Oct  9 21:48:19 2022 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-2.7.6).
</div>

    </div>
  </body>
</html>