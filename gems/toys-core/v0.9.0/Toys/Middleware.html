<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Toys::Middleware
  
    &mdash; Toys
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Toys::Middleware";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span>
     &raquo; 
    <span class="title">Middleware</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Toys::Middleware
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="StandardMiddleware/AddVerbosityFlags.html" title="Toys::StandardMiddleware::AddVerbosityFlags (class)">StandardMiddleware::AddVerbosityFlags</a></span>, <span class='object_link'><a href="StandardMiddleware/HandleUsageErrors.html" title="Toys::StandardMiddleware::HandleUsageErrors (class)">StandardMiddleware::HandleUsageErrors</a></span>, <span class='object_link'><a href="StandardMiddleware/SetDefaultDescriptions.html" title="Toys::StandardMiddleware::SetDefaultDescriptions (class)">StandardMiddleware::SetDefaultDescriptions</a></span>, <span class='object_link'><a href="StandardMiddleware/ShowHelp.html" title="Toys::StandardMiddleware::ShowHelp (class)">StandardMiddleware::ShowHelp</a></span>, <span class='object_link'><a href="StandardMiddleware/ShowRootVersion.html" title="Toys::StandardMiddleware::ShowRootVersion (class)">StandardMiddleware::ShowRootVersion</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/toys/middleware.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A middleware is an object that has the opportunity to alter the
configuration and runtime behavior of each tool in a Toys CLI. A CLI
contains an ordered list of middleware, known as the <em>middleware stack</em>,
that together define the CLI’s default behavior.</p>

<p>Specifically, a middleware can perform two functions.</p>

<p>First, it can modify the configuration of a tool. After tools are defined
from configuration, the middleware stack can make modifications to each
tool. A middleware can add flags and arguments to the tool, modify the
description, or make any other changes to how the tool is set up.</p>

<p>Second, a middleware can intercept and change tool execution. Like a Rack
middleware, a Toys middleware can wrap execution with its own code,
replace it outright, or leave it unmodified.</p>

<p>Generally, a middleware is a class that implements the two methods defined
in this module: <span class='object_link'><a href="#config-instance_method" title="Toys::Middleware#config (method)">#config</a></span> and <span class='object_link'><a href="#run-instance_method" title="Toys::Middleware#run (method)">#run</a></span>. A
middleware can include this module to get default implementations that do
nothing, but this is not required.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">#<strong>config</strong>(tool, loader)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This method is called after a tool has been defined, and gives this middleware the opportunity to modify the tool definition.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>(context)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This method is called when the tool is run.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="config-instance_method">
  
    #<strong>config</strong>(tool, loader)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>This method is called after a tool has been defined, and gives this
middleware the opportunity to modify the tool definition. It is passed
the tool definition object and the loader, and can make any changes to
the tool definition. In most cases, this method should also call
<code>yield</code>, which passes control to the next middleware in the stack. A
middleware can disable modifications done by subsequent middleware by
omitting the <code>yield</code> call, but this is uncommon.</p>

<p>This basic implementation does nothing and simply yields to the next
middleware.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tool</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Tool.html" title="Toys::Tool (class)">Toys::Tool</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The tool definition to modify.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>loader</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Loader.html" title="Toys::Loader (class)">Toys::Loader</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The loader that loaded this tool.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/middleware.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span><span class='lparen'>(</span><span class='id identifier rubyid_tool'>tool</span><span class='comma'>,</span> <span class='id identifier rubyid_loader'>loader</span><span class='rparen'>)</span> <span class='comment'># rubocop:disable Lint/UnusedMethodArgument
</span>  <span class='kw'>yield</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run-instance_method">
  
    #<strong>run</strong>(context)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>This method is called when the tool is run. It gives the middleware an
opportunity to modify the runtime behavior of the tool. It is passed
the tool instance (i.e. the object that hosts a tool’s <code>run</code> method),
and you can use this object to access the tool’s options and other
context data. In most cases, this method should also call <code>yield</code>,
which passes control to the next middleware in the stack. A middleware
can “wrap” normal execution by calling <code>yield</code> somewhere in its
implementation of this method, or it can completely replace the
execution behavior by not calling <code>yield</code> at all.</p>

<p>Like a tool’s <code>run</code> method, this method’s return value is unused. If
you want to output from a tool, write to stdout or stderr. If you want
to set the exit status code, call <span class='object_link'><a href="Context.html#exit-instance_method" title="Toys::Context#exit (method)">Context#exit</a></span> on the context.</p>

<p>This basic implementation does nothing and simply yields to the next
middleware.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Toys::Context (class)">Toys::Context</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The tool execution context.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/middleware.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='comment'># rubocop:disable Lint/UnusedMethodArgument
</span>  <span class='kw'>yield</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Dec  2 13:54:01 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.6.5).
</div>

    </div>
  </body>
</html>