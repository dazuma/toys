<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Toys::Settings
  
    &mdash; Toys
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Toys::Settings";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span>
     &raquo; 
    <span class="title">Settings</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Toys::Settings
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Toys::Settings</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/toys/settings.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A settings class defines the structure of application settings, i.e. the
various fields that can be set, and their types. You can define a settings
structure by subclassing this base class, and using the provided methods.</p>

<h3 id="attributes">Attributes</h3>

<p>To define an attribute, use the <span class='object_link'><a href="#settings_attr-class_method" title="Toys::Settings.settings_attr (method)">Settings.settings_attr</a></span> declaration.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ServiceSettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:endpoint</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>api.example.com</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_my_settings'>my_settings</span> <span class='op'>=</span> <span class='const'>ServiceSettings</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint_set?'>endpoint_set?</span>   <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint'>endpoint</span>        <span class='comment'># =&gt; &quot;api.example.com&quot;
</span><span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint'>endpoint</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rest.example.com</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint_set?'>endpoint_set?</span>   <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint'>endpoint</span>        <span class='comment'># =&gt; &quot;rest.example.com&quot;
</span><span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint_unset!'>endpoint_unset!</span>
<span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint_set?'>endpoint_set?</span>   <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint'>endpoint</span>        <span class='comment'># =&gt; &quot;api.example.com&quot;
</span></code></pre>

<p>An attribute has a name, a default value, and a type specification. The
name is used to define methods for getting and setting the attribute. The
default is returned if no value is set. (See the section below on parents
and defaults for more information.) The type specification governs what
values are allowed. (See the section below on type specifications.)</p>

<p>Attribute names must start with an ascii letter, and may contain only ascii
letters, digits, and underscores. Unlike method names, they may not include
non-ascii unicode characters, nor may they end with <code>!</code> or <code>?</code>.
Additionally, the name <code>method_missing</code> is not allowed because of its
special behavior in Ruby.</p>

<p>Each attribute defines four methods: a getter, a setter, an unsetter, and a
set detector. In the above example, the attribute named <code>:endpoint</code> creates
the following four methods:</p>

<ul>
<li> <code>endpoint</code> - retrieves the attribute value, or a default if not set.</li>
<li> <code>endpoint=(value)</code> - sets a new attribute value.</li>
<li> <code>endpoint_unset!</code> - unsets the attribute, reverting to a default.</li>
<li> <code>endpoint_set?</code> - returns a boolean, whether the attribute is set.</li>
</ul>

<h3 id="groups">Groups</h3>

<p>A group is a settings field that itself is a Settings object. You can use
it to group settings fields in a hierarchy.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ServiceSettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:endpoint</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>api.example.com</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_settings_group'>settings_group</span> <span class='symbol'>:service_flags</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:verbose</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:use_proxy</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_my_settings'>my_settings</span> <span class='op'>=</span> <span class='const'>ServiceSettings</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_service_flags'>service_flags</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span>      <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_service_flags'>service_flags</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_service_flags'>service_flags</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span>      <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_endpoint'>endpoint</span>                   <span class='comment'># =&gt; &quot;api.example.com&quot;
</span></code></pre>

<p>You can define a group inline, as in the example above, or create an
explicit settings class and use it for the group. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Flags</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:verbose</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:use_proxy</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
<span class='kw'>end</span>
<span class='kw'>class</span> <span class='const'>ServiceSettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:endpoint</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>api.example.com</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_settings_group'>settings_group</span> <span class='symbol'>:service_flags</span><span class='comma'>,</span> <span class='const'>Flags</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_my_settings'>my_settings</span> <span class='op'>=</span> <span class='const'>ServiceSettings</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_service_flags'>service_flags</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span> <span class='op'>=</span> <span class='kw'>true</span>
</code></pre>

<p>If the module enclosing a subclass of <code>Settings</code> is itself a subclass of
<code>Settings</code>, then the class is automatically added to its enclosing class as
a group. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ServiceSettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:endpoint</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>api.example.com</span><span class='tstring_end'>&quot;</span></span>
  <span class='comment'># Automatically adds this as the group service_flags.
</span>  <span class='comment'># The name is inferred (snake_cased) from the class name.
</span>  <span class='kw'>class</span> <span class='const'>ServiceFlags</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
    <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:verbose</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:use_proxy</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_my_settings'>my_settings</span> <span class='op'>=</span> <span class='const'>ServiceSettings</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_my_settings'>my_settings</span><span class='period'>.</span><span class='id identifier rubyid_service_flags'>service_flags</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span> <span class='op'>=</span> <span class='kw'>true</span>
</code></pre>

<h3 id="type-specifications">Type specifications</h3>

<p>A type specification is a restriction on the types of values allowed for a
settings field. Every attribute has a type specification. You can set it
explicitly by providing a <code>:type</code> argument or a block. If a type
specification is not provided explicitly, it is inferred from the default
value of the attribute.</p>

<p>Type specifications can be any of the following:</p>

<ul>
<li><p>A Module, restricting values to those that include the module.</p>

<p>For example, a type specification of <code>Enumerable</code> would accept <code>[123]</code>
but not <code>123</code>.</p></li>
<li><p>A Class, restricting values to that class or any subclass.</p>

<p>For example, a type specification of <code>Time</code> would accept <code>Time.now</code> but
not <code>DateTime.now</code>.</p>

<p>Note that some classes will convert (i.e. parse) strings. For example,
a type specification of <code>Integer</code> will accept the string <code>&quot;-123&quot;</code><code>and
convert it to the value</code>-123`. Classes that support parsing include:</p>

<ul>
<li> <code>Date</code></li>
<li> <code>DateTime</code></li>
<li> <code>Float</code></li>
<li> <code>Integer</code></li>
<li> <code>Regexp</code></li>
<li> <code>Symbol</code></li>
<li> <code>Time</code></li>
</ul></li>
<li><p>A Regexp, restricting values to strings matching the regexp.</p>

<p>For example, a type specification of <code>/^\w+$/</code> would match <code>&quot;abc&quot;</code> but
not <code>&quot;abc!&quot;</code>.</p></li>
<li><p>A Range, restricting values to objects that fall in the range and are
of the same class (or a subclass) as the endpoints. String values are
accepted if they can be converted to the endpoint class as specified by
a class type specification.</p>

<p>For example, a type specification of <code>(1..5)</code> would match <code>5</code> but not
<code>6</code>. It would also match <code>&quot;5&quot;</code> because the String can be parsed into an
Integer in the range.</p></li>
<li><p>A specific value, any Symbol, String, Numeric, or the values <code>nil</code>,
<code>true</code>, or <code>false</code>, restricting the value to only that given value.</p>

<p>For example, a type specification of <code>:foo</code> would match <code>:foo</code> but not
<code>:bar</code>.</p>

<p>(It might not seem terribly useful to have an attribute that can take
only one value, but this type is generally used as part of a union
type, described below, to implement an enumeration.)</p></li>
<li><p>An Array representing a union type, each of whose elements is one of
the above types. Values are accepted if they match any of the elements.</p>

<p>For example, a type specification of <code>[:a, :b :c]</code> would match <code>:a</code> but
not <code>&quot;a&quot;</code>. Similarly, a type specification of <code>[String, Integer, nil]</code>
would match <code>&quot;hello&quot;</code>, <code>123</code>, or <code>nil</code>, but not <code>123.4</code>.</p></li>
<li><p>A Proc that takes the proposed value and returns either the value if it
is legal, the converted value if it can be converted to a legal value,
or the constant <span class='object_link'><a href="#ILLEGAL_VALUE-constant" title="Toys::Settings::ILLEGAL_VALUE (constant)">ILLEGAL_VALUE</a></span> if it cannot be
converted to a legal value. You may also pass a block to
<code>settings_attr</code> to set a Proc type specification.</p></li>
<li><p>A <span class='object_link'><a href="Settings/Type.html" title="Toys::Settings::Type (class)">Type</a></span> that checks and converts values.</p></li>
</ul>

<p>If you do not explicitly provide a type specification, one is inferred from
the attribute&#39;s default value. The rules are:</p>

<ul>
<li><p>If the default value is <code>true</code> or <code>false</code>, then the type specification
inferred is <code>[true, false]</code>.</p></li>
<li><p>If the default value is <code>nil</code> or not provided, then the type
specification allows any object (i.e. is equivalent to <code>Object</code>).</p></li>
<li><p>Otherwise, the type specification allows any value of the same class as
the default value. For example, if the default value is <code>&quot;&quot;</code>, the
effective type specification is <code>String</code>.</p></li>
</ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ServiceSettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='comment'># Allows only strings because the default is a string.
</span>  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:endpoint</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example.com</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>ServiceSettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='comment'># Allows strings or nil.
</span>  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:endpoint</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='lbracket'>[</span><span class='const'>String</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rbracket'>]</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>ServiceSettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='comment'># Raises ArgumentError because the default is nil, which does not
</span>  <span class='comment'># match the type specification. (You should either allow nil
</span>  <span class='comment'># explicitly with `type: [String, nil]` or set the default to a
</span>  <span class='comment'># suitable string such as the empty string &quot;&quot;.)
</span>  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:endpoint</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='const'>String</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="settings-parents">Settings parents</h3>

<p>A settings object can have a &quot;parent&quot; which provides the values if they are
not set in the settings object. This lets you organize settings as
&quot;defaults&quot; and &quot;overrides&quot;. A parent settings object provides the defaults,
and a child can selectively override certain values.</p>

<p>To set the parent for a settings object, pass it as the argument to the
Settings constructor. When a field in a settings object is queried, it
looks up the value as follows:</p>

<ul>
<li> If a field value is explicitly set in the settings object, that value
is returned.</li>
<li> If the field is not set in the settings object, but the settings object
has a parent, the parent is queried. If that parent also does not have
a value for the field, it may query its parent in turn, and so forth.</li>
<li> If we encounter a root settings with no parent, and still no value is
set for the field, the default is returned.</li>
</ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MySettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:str</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_root_settings'>root_settings</span> <span class='op'>=</span> <span class='const'>MySettings</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_child_settings'>child_settings</span> <span class='op'>=</span> <span class='const'>MySettings</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='rparen'>)</span>
<span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;default&quot;
</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value_from_root</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;value_from_root&quot;
</span><span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value_from_child</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;value_from_child&quot;
</span><span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_str_unset!'>str_unset!</span>
<span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;value_from_root&quot;
</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='period'>.</span><span class='id identifier rubyid_str_unset!'>str_unset!</span>
<span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;default&quot;
</span></code></pre>

<p>Parents are honored through groups as well. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MySettings</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_group'>settings_group</span> <span class='symbol'>:flags</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:verbose</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:force</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_root_settings'>root_settings</span> <span class='op'>=</span> <span class='const'>MySettings</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_child_settings'>child_settings</span> <span class='op'>=</span> <span class='const'>MySettings</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='rparen'>)</span>
<span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_flags'>flags</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span>       <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='period'>.</span><span class='id identifier rubyid_flags'>flags</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_flags'>flags</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span>       <span class='comment'># =&gt; true
</span></code></pre>

<p>Usually, a settings and its parent (and its parent, and so forth) should
have the same class. This guarantees that they define the same fields with
the same type specifications. However, this is not required. If a parent
does not define a particular field, it is treated as if that field is
unset, and lookup proceeds to its parent. To illustrate:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Settings1</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:str</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='kw'>class</span> <span class='const'>Settings2</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_root_settings'>root_settings</span> <span class='op'>=</span> <span class='const'>Settings1</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_child_settings'>child_settings</span> <span class='op'>=</span> <span class='const'>Settings2</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='rparen'>)</span>  <span class='comment'># does not have str
</span><span class='id identifier rubyid_grandchild_settings'>grandchild_settings</span> <span class='op'>=</span> <span class='const'>Settings1</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_child_settings'>child_settings</span><span class='rparen'>)</span>

<span class='id identifier rubyid_grandchild_settings'>grandchild_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;default&quot;
</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value_from_root</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_grandchild_settings'>grandchild_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;value_from_root&quot;
</span></code></pre>

<p>Type specifications are enforced when falling back to parent values. If a
parent provides a value that is not allowed, it is treated as if the field
is unset, and lookup proceeds to its parent.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Settings1</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:str</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># type spec is String
</span><span class='kw'>end</span>
<span class='kw'>class</span> <span class='const'>Settings2</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Toys.html" title="Toys (module)">Toys</a></span></span><span class='op'>::</span><span class='const'>Settings</span>
  <span class='id identifier rubyid_settings_attr'>settings_attr</span> <span class='symbol'>:str</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='int'>0</span>  <span class='comment'># type spec is Integer
</span><span class='kw'>end</span>

<span class='id identifier rubyid_root_settings'>root_settings</span> <span class='op'>=</span> <span class='const'>Settings1</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_child_settings'>child_settings</span> <span class='op'>=</span> <span class='const'>Settings2</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='rparen'>)</span>
<span class='id identifier rubyid_grandchild_settings'>grandchild_settings</span> <span class='op'>=</span> <span class='const'>Settings1</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_child_settings'>child_settings</span><span class='rparen'>)</span>

<span class='id identifier rubyid_grandchild_settings'>grandchild_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;default&quot;
</span><span class='id identifier rubyid_child_settings'>child_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='int'>123</span>       <span class='comment'># does not match grandchild&#39;s type
</span><span class='id identifier rubyid_root_settings'>root_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value_from_root</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_grandchild_settings'>grandchild_settings</span><span class='period'>.</span><span class='id identifier rubyid_str'>str</span>        <span class='comment'># =&gt; &quot;value_from_root&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="ToolDefinition/Settings.html" title="Toys::ToolDefinition::Settings (class)">ToolDefinition::Settings</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>, <span class='object_link'><a href="Settings/Type.html" title="Toys::Settings::Type (class)">Type</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="ILLEGAL_VALUE-constant" class="">ILLEGAL_VALUE =
          <div class="docstring">
  <div class="discussion">
    <p>A special value indicating a type check failure.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='op'>::</span><span class='const'>Object</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="DEFAULT_TYPE-constant" class="">DEFAULT_TYPE =
          <div class="docstring">
  <div class="discussion">
    <p>A special type specification indicating infer from the default value.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='op'>::</span><span class='const'>Object</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#settings_attr-class_method" title="settings_attr (class method)">.<strong>settings_attr</strong>(name, default: nil, type: DEFAULT_TYPE, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add an attribute field.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#settings_group-class_method" title="settings_group (class method)">.<strong>settings_group</strong>(name, klass = nil, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add a group field.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(parent: nil)  &#x21d2; Settings </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a settings instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_data!-instance_method" title="#load_data! (instance method)">#<strong>load_data!</strong>(data, raise_on_failure: false)  &#x21d2; Array&lt;FieldError&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Load the given hash of data into this settings object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_json!-instance_method" title="#load_json! (instance method)">#<strong>load_json!</strong>(str, raise_on_failure: false, **json_opts)  &#x21d2; Array&lt;FieldError&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parse the given JSON string and load the data into this settings object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_json_file!-instance_method" title="#load_json_file! (instance method)">#<strong>load_json_file!</strong>(filename, raise_on_failure: false, **json_opts)  &#x21d2; Array&lt;FieldError&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parse the given JSON file and load the data into this settings object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_yaml!-instance_method" title="#load_yaml! (instance method)">#<strong>load_yaml!</strong>(str, raise_on_failure: false)  &#x21d2; Array&lt;FieldError&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parse the given YAML string and load the data into this settings object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_yaml_file!-instance_method" title="#load_yaml_file! (instance method)">#<strong>load_yaml_file!</strong>(filename, raise_on_failure: false)  &#x21d2; Array&lt;FieldError&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parse the given YAML file and load the data into this settings object.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(parent: nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Toys::Settings (class)">Settings</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a settings instance.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>parent</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Toys::Settings (class)">Settings</a></span></tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional parent settings.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


582
583
584
585
586
587
588
589
590</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/settings.rb', line 582</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>parent:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Toys::Settings (class)">Settings</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>parent must be a Settings object, if given</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='id identifier rubyid_parent'>parent</span>
  <span class='ivar'>@fields</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span>
  <span class='ivar'>@mutex</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Mutex</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@values</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="settings_attr-class_method">
  
    .<strong>settings_attr</strong>(name, default: nil, type: DEFAULT_TYPE, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add an attribute field.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the attribute.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>default</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional. The final default value if the field
is not set in this settings object or any of its ancestors. If not
provided, <code>nil</code> is used.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>DEFAULT_TYPE</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional. The type specification. If not provided,
one is inferred from the default value.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


798
799
800
801
802
803
804
805
806
807</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/settings.rb', line 798</span>

<span class='kw'>def</span> <span class='id identifier rubyid_settings_attr'>settings_attr</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='const'><span class='object_link'><a href="#DEFAULT_TYPE-constant" title="Toys::Settings::DEFAULT_TYPE (constant)">DEFAULT_TYPE</a></span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_interpret_name'>interpret_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span> <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#DEFAULT_TYPE-constant" title="Toys::Settings::DEFAULT_TYPE (constant)">DEFAULT_TYPE</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_block'>block</span>
  <span class='ivar'>@fields</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_field'>field</span> <span class='op'>=</span> <span class='const'>Field</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_default'>default</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_create_getter'>create_getter</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_create_setter'>create_setter</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_create_set_detect'>create_set_detect</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_create_unsetter'>create_unsetter</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="settings_group-class_method">
  
    .<strong>settings_group</strong>(name, klass = nil, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add a group field.</p>

<p>Specify the group&#39;s structure by passing either a class (which must
subclass Settings) or a block (which will be called on the group&#39;s
class.)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the group.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>klass</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional. The class of the group (which must
subclass Settings). If not present, an anonymous subclass will be
created, and you must provide a block to configure it.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


821
822
823
824
825
826
827
828
829
830
831
832
833
834
835</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/settings.rb', line 821</span>

<span class='kw'>def</span> <span class='id identifier rubyid_settings_group'>settings_group</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_interpret_name'>interpret_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>==</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A group field requires a class or a block, but not both.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_klass'>klass</span>
    <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Toys::Settings (class)">Settings</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_klass_name'>klass_name</span> <span class='op'>=</span> <span class='id identifier rubyid_to_class_name'>to_class_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_const_set'>const_set</span><span class='lparen'>(</span><span class='id identifier rubyid_klass_name'>klass_name</span><span class='comma'>,</span> <span class='id identifier rubyid_klass'>klass</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_class_eval'>class_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@fields</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_field'>field</span> <span class='op'>=</span> <span class='const'>Field</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='const'>SETTINGS_TYPE</span><span class='comma'>,</span> <span class='id identifier rubyid_klass'>klass</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_create_getter'>create_getter</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="load_data!-instance_method">
  
    #<strong>load_data!</strong>(data, raise_on_failure: false)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Load the given hash of data into this settings object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The data as a hash of key-value pairs.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>raise_on_failure</span>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raises an exception on the
first error encountered. If <code>false</code>, continues parsing and returns an
array of the errors raised.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of errors.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/settings.rb', line 601</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_data!'>load_data!</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_errors'>errors</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
    <span class='id identifier rubyid_field'>field</span> <span class='op'>=</span> <span class='ivar'>@fields</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_field'>field</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_field'>field</span><span class='period'>.</span><span class='id identifier rubyid_group?'>group?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hash</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Hash</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_get!'>get!</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_load_data!'>load_data!</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_set!'>set!</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_e'>e</span> <span class='kw'>if</span> <span class='id identifier rubyid_raise_on_failure'>raise_on_failure</span>
      <span class='id identifier rubyid_errors'>errors</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_errors'>errors</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_json!-instance_method">
  
    #<strong>load_json!</strong>(str, raise_on_failure: false, **json_opts)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Parse the given JSON string and load the data into this settings object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>str</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The JSON-formatted string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>raise_on_failure</span>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raises an exception on the
first error encountered. If <code>false</code>, continues parsing and returns an
array of the errors raised.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of errors.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


658
659
660
661</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/settings.rb', line 658</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_json!'>load_json!</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_json_opts'>json_opts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>json</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_load_data!'>load_data!</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_json_opts'>json_opts</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='id identifier rubyid_raise_on_failure'>raise_on_failure</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_json_file!-instance_method">
  
    #<strong>load_json_file!</strong>(filename, raise_on_failure: false, **json_opts)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Parse the given JSON file and load the data into this settings object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The path to the JSON-formatted file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>raise_on_failure</span>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raises an exception on the
first error encountered. If <code>false</code>, continues parsing and returns an
array of the errors raised.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of errors.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


672
673
674</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/settings.rb', line 672</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_json_file!'>load_json_file!</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_json_opts'>json_opts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_load_json!'>load_json!</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='id identifier rubyid_raise_on_failure'>raise_on_failure</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_json_opts'>json_opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_yaml!-instance_method">
  
    #<strong>load_yaml!</strong>(str, raise_on_failure: false)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Parse the given YAML string and load the data into this settings object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>str</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The YAML-formatted string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>raise_on_failure</span>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raises an exception on the
first error encountered. If <code>false</code>, continues parsing and returns an
array of the errors raised.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of errors.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


631
632
633
634</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/settings.rb', line 631</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_yaml!'>load_yaml!</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>psych</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_load_data!'>load_data!</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Psych</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='id identifier rubyid_raise_on_failure'>raise_on_failure</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_yaml_file!-instance_method">
  
    #<strong>load_yaml_file!</strong>(filename, raise_on_failure: false)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Parse the given YAML file and load the data into this settings object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The path to the YAML-formatted file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>raise_on_failure</span>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, raises an exception on the
first error encountered. If <code>false</code>, continues parsing and returns an
array of the errors raised.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Settings/FieldError.html" title="Toys::Settings::FieldError (class)">FieldError</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of errors.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


645
646
647</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/toys/settings.rb', line 645</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_yaml_file!'>load_yaml_file!</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_load_yaml!'>load_yaml!</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>raise_on_failure:</span> <span class='id identifier rubyid_raise_on_failure'>raise_on_failure</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jan 23 21:07:39 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-2.7.7).
</div>

    </div>
  </body>
</html>